{"ast":null,"code":"(function (global, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(['./lg-utils'], factory);\n  } else if (typeof exports !== \"undefined\") {\n    factory(require('./lg-utils'));\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(global.lgUtils);\n    global.lightgallery = mod.exports;\n  }\n})(this, function (_lgUtils) {\n  'use strict';\n\n  var _lgUtils2 = _interopRequireDefault(_lgUtils);\n\n  function _interopRequireDefault(obj) {\n    return obj && obj.__esModule ? obj : {\n      default: obj\n    };\n  }\n\n  var _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  /** Polyfill the CustomEvent() constructor functionality in Internet Explorer 9 and higher */\n\n\n  (function () {\n    if (typeof window.CustomEvent === 'function') {\n      return false;\n    }\n\n    function CustomEvent(event, params) {\n      params = params || {\n        bubbles: false,\n        cancelable: false,\n        detail: undefined\n      };\n      var evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n      return evt;\n    }\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent;\n  })();\n\n  window.utils = _lgUtils2.default;\n  window.lgData = {\n    uid: 0\n  };\n  window.lgModules = {};\n  var defaults = {\n    mode: 'lg-slide',\n    // Ex : 'ease'\n    cssEasing: 'ease',\n    //'for jquery animation'\n    easing: 'linear',\n    speed: 600,\n    height: '100%',\n    width: '100%',\n    addClass: '',\n    startClass: 'lg-start-zoom',\n    backdropDuration: 150,\n    // Set 0, if u don't want to hide the controls \n    hideBarsDelay: 6000,\n    useLeft: false,\n    // aria-labelledby attribute fot gallery\n    ariaLabelledby: '',\n    //aria-describedby attribute for gallery\n    ariaDescribedby: '',\n    closable: true,\n    loop: true,\n    escKey: true,\n    keyPress: true,\n    controls: true,\n    slideEndAnimatoin: true,\n    hideControlOnEnd: false,\n    mousewheel: false,\n    getCaptionFromTitleOrAlt: true,\n    // .lg-item || '.lg-sub-html'\n    appendSubHtmlTo: '.lg-sub-html',\n    subHtmlSelectorRelative: false,\n\n    /**\n     * @desc number of preload slides\n     * will exicute only after the current slide is fully loaded.\n     *\n     * @ex you clicked on 4th image and if preload = 1 then 3rd slide and 5th\n     * slide will be loaded in the background after the 4th slide is fully loaded..\n     * if preload is 2 then 2nd 3rd 5th 6th slides will be preloaded.. ... ...\n     *\n     */\n    preload: 1,\n    showAfterLoad: true,\n    selector: '',\n    selectWithin: '',\n    nextHtml: '',\n    prevHtml: '',\n    // 0, 1\n    index: false,\n    iframeMaxWidth: '100%',\n    download: true,\n    counter: true,\n    appendCounterTo: '.lg-toolbar',\n    swipeThreshold: 50,\n    enableSwipe: true,\n    enableDrag: true,\n    dynamic: false,\n    dynamicEl: [],\n    galleryId: 1,\n    supportLegacyBrowser: true\n  };\n\n  function Plugin(element, options) {\n    // Current lightGallery element\n    this.el = element; // lightGallery settings\n\n    this.s = _extends({}, defaults, options); // When using dynamic mode, ensure dynamicEl is an array\n\n    if (this.s.dynamic && this.s.dynamicEl !== 'undefined' && this.s.dynamicEl.constructor === Array && !this.s.dynamicEl.length) {\n      throw 'When using dynamic mode, you must also define dynamicEl as an Array.';\n    } // lightGallery modules\n\n\n    this.modules = {}; // false when lightgallery complete first slide;\n\n    this.lGalleryOn = false;\n    this.lgBusy = false; // Timeout function for hiding controls;\n\n    this.hideBartimeout = false; // To determine browser supports for touch events;\n\n    this.isTouch = 'ontouchstart' in document.documentElement; // Disable hideControlOnEnd if sildeEndAnimation is true\n\n    if (this.s.slideEndAnimatoin) {\n      this.s.hideControlOnEnd = false;\n    }\n\n    this.items = []; // Gallery items\n\n    if (this.s.dynamic) {\n      this.items = this.s.dynamicEl;\n    } else {\n      if (this.s.selector === 'this') {\n        this.items.push(this.el);\n      } else if (this.s.selector !== '') {\n        if (this.s.selectWithin) {\n          this.items = document.querySelector(this.s.selectWithin).querySelectorAll(this.s.selector);\n        } else {\n          this.items = this.el.querySelectorAll(this.s.selector);\n        }\n      } else {\n        this.items = this.el.children;\n      }\n    } // .lg-item\n\n\n    this.___slide = ''; // .lg-outer\n\n    this.outer = '';\n    this.init();\n    return this;\n  }\n\n  Plugin.prototype.init = function () {\n    var _this = this; // s.preload should not be more than $item.length\n\n\n    if (_this.s.preload > _this.items.length) {\n      _this.s.preload = _this.items.length;\n    } // if dynamic option is enabled execute immediately\n\n\n    var _hash = window.location.hash;\n\n    if (_hash.indexOf('lg=' + this.s.galleryId) > 0) {\n      _this.index = parseInt(_hash.split('&slide=')[1], 10);\n\n      _lgUtils2.default.addClass(document.body, 'lg-from-hash');\n\n      if (!_lgUtils2.default.hasClass(document.body, 'lg-on')) {\n        _lgUtils2.default.addClass(document.body, 'lg-on');\n\n        setTimeout(function () {\n          _this.build(_this.index);\n        });\n      }\n    }\n\n    if (_this.s.dynamic) {\n      _lgUtils2.default.trigger(this.el, 'onBeforeOpen');\n\n      _this.index = _this.s.index || 0; // prevent accidental double execution\n\n      if (!_lgUtils2.default.hasClass(document.body, 'lg-on')) {\n        _lgUtils2.default.addClass(document.body, 'lg-on');\n\n        setTimeout(function () {\n          _this.build(_this.index);\n        });\n      }\n    } else {\n      for (var i = 0; i < _this.items.length; i++) {\n        /*jshint loopfunc: true */\n        (function (index) {\n          // Using different namespace for click because click event should not unbind if selector is same object('this')\n          _lgUtils2.default.on(_this.items[index], 'click.lgcustom', function (e) {\n            e.preventDefault();\n\n            _lgUtils2.default.trigger(_this.el, 'onBeforeOpen');\n\n            _this.index = _this.s.index || index;\n\n            if (!_lgUtils2.default.hasClass(document.body, 'lg-on')) {\n              _this.build(_this.index);\n\n              _lgUtils2.default.addClass(document.body, 'lg-on');\n            }\n          });\n        })(i);\n      }\n    }\n  };\n\n  Plugin.prototype.build = function (index) {\n    var _this = this;\n\n    _this.structure();\n\n    for (var key in window.lgModules) {\n      _this.modules[key] = new window.lgModules[key](_this.el);\n    } // initiate slide function\n\n\n    _this.slide(index, false, false);\n\n    if (_this.s.keyPress) {\n      _this.keyPress();\n    }\n\n    if (_this.items.length > 1) {\n      _this.arrow();\n\n      setTimeout(function () {\n        _this.enableDrag();\n\n        _this.enableSwipe();\n      }, 50);\n\n      if (_this.s.mousewheel) {\n        _this.mousewheel();\n      }\n    }\n\n    _this.counter();\n\n    _this.closeGallery();\n\n    _lgUtils2.default.trigger(_this.el, 'onAfterOpen'); // Hide controllers if mouse doesn't move for some period\n\n\n    if (_this.s.hideBarsDelay > 0) {\n      // Hide controls if user doesn't use mouse or touch after opening gallery\n      var initialHideBarTimeout = setTimeout(function () {\n        _lgUtils2.default.addClass(_this.outer, 'lg-hide-items');\n      }, _this.s.hideBarsDelay);\n\n      _lgUtils2.default.on(_this.outer, 'mousemove.lg click.lg touchstart.lg', function () {\n        // Cancel initalHideBarTimout if user uses mouse or touch events\n        // Before it fires\n        clearTimeout(initialHideBarTimeout);\n\n        _lgUtils2.default.removeClass(_this.outer, 'lg-hide-items');\n\n        clearTimeout(_this.hideBartimeout); // Timeout will be cleared on each slide movement also\n\n        _this.hideBartimeout = setTimeout(function () {\n          _lgUtils2.default.addClass(_this.outer, 'lg-hide-items');\n        }, _this.s.hideBarsDelay);\n      });\n    }\n  };\n\n  Plugin.prototype.structure = function () {\n    var list = '';\n    var controls = '';\n    var i = 0;\n    var subHtmlCont = '';\n    var template;\n\n    var _this = this;\n\n    document.body.insertAdjacentHTML('beforeend', '<div class=\"lg-backdrop\"></div>');\n\n    _lgUtils2.default.setVendor(document.querySelector('.lg-backdrop'), 'TransitionDuration', this.s.backdropDuration + 'ms'); // Create gallery items\n\n\n    for (i = 0; i < this.items.length; i++) {\n      list += '<div class=\"lg-item\"></div>';\n    } // Create controlls\n\n\n    if (this.s.controls && this.items.length > 1) {\n      controls = '<div class=\"lg-actions\">' + '<button type=\"button\" aria-label=\"Previous slide\" class=\"lg-prev lg-icon\">' + this.s.prevHtml + '</button>' + '<button type=\"button\" aria-label=\"Next slide\" class=\"lg-next lg-icon\">' + this.s.nextHtml + '</button>' + '</div>';\n    }\n\n    if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n      subHtmlCont = '<div role=\"status\" aria-live=\"polite\" class=\"lg-sub-html\"></div>';\n    }\n\n    var ariaLabelledby = this.s.ariaLabelledby ? 'aria-labelledby=\"' + this.s.ariaLabelledby + '\"' : '';\n    var ariaDescribedby = this.s.ariaDescribedby ? 'aria-describedby=\"' + this.s.ariaDescribedby + '\"' : '';\n    template = '<div tabindex=\"-1\" aria-modal=\"true\" ' + ariaLabelledby + ' ' + ariaDescribedby + ' role=\"dialog\" class=\"lg-outer ' + this.s.addClass + ' ' + this.s.startClass + '\">' + '<div class=\"lg\" style=\"width:' + this.s.width + '; height:' + this.s.height + '\">' + '<div class=\"lg-inner\">' + list + '</div>' + '<div class=\"lg-toolbar lg-group\">' + '<button type=\"button\" aria-label=\"Close gallery\" class=\"lg-close lg-icon\"></button>' + '</div>' + controls + subHtmlCont + '</div>' + '</div>';\n    document.body.insertAdjacentHTML('beforeend', template);\n    this.outer = document.querySelector('.lg-outer');\n    this.outer.focus();\n    this.___slide = this.outer.querySelectorAll('.lg-item');\n\n    if (this.s.useLeft) {\n      _lgUtils2.default.addClass(this.outer, 'lg-use-left'); // Set mode lg-slide if use left is true;\n\n\n      this.s.mode = 'lg-slide';\n    } else {\n      _lgUtils2.default.addClass(this.outer, 'lg-use-css3');\n    } // For fixed height gallery\n\n\n    _this.setTop();\n\n    _lgUtils2.default.on(window, 'resize.lg orientationchange.lg', function () {\n      setTimeout(function () {\n        _this.setTop();\n      }, 100);\n    }); // add class lg-current to remove initial transition\n\n\n    _lgUtils2.default.addClass(this.___slide[this.index], 'lg-current'); // add Class for css support and transition mode\n\n\n    if (this.doCss()) {\n      _lgUtils2.default.addClass(this.outer, 'lg-css3');\n    } else {\n      _lgUtils2.default.addClass(this.outer, 'lg-css'); // Set speed 0 because no animation will happen if browser doesn't support css3\n\n\n      this.s.speed = 0;\n    }\n\n    _lgUtils2.default.addClass(this.outer, this.s.mode);\n\n    if (this.s.enableDrag && this.items.length > 1) {\n      _lgUtils2.default.addClass(this.outer, 'lg-grab');\n    }\n\n    if (this.s.showAfterLoad) {\n      _lgUtils2.default.addClass(this.outer, 'lg-show-after-load');\n    }\n\n    if (this.doCss()) {\n      var inner = this.outer.querySelector('.lg-inner');\n\n      _lgUtils2.default.setVendor(inner, 'TransitionTimingFunction', this.s.cssEasing);\n\n      _lgUtils2.default.setVendor(inner, 'TransitionDuration', this.s.speed + 'ms');\n    }\n\n    setTimeout(function () {\n      _lgUtils2.default.addClass(document.querySelector('.lg-backdrop'), 'in');\n    });\n    setTimeout(function () {\n      _lgUtils2.default.addClass(_this.outer, 'lg-visible');\n    }, this.s.backdropDuration);\n\n    if (this.s.download) {\n      this.outer.querySelector('.lg-toolbar').insertAdjacentHTML('beforeend', '<a id=\"lg-download\" aria-label=\"Download\" target=\"_blank\" download class=\"lg-download lg-icon\"></a>');\n    } // Store the current scroll top value to scroll back after closing the gallery..\n\n\n    this.prevScrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n  }; // For fixed height gallery\n\n\n  Plugin.prototype.setTop = function () {\n    if (this.s.height !== '100%') {\n      var wH = window.innerHeight;\n      var top = (wH - parseInt(this.s.height, 10)) / 2;\n      var lGallery = this.outer.querySelector('.lg');\n\n      if (wH >= parseInt(this.s.height, 10)) {\n        lGallery.style.top = top + 'px';\n      } else {\n        lGallery.style.top = '0px';\n      }\n    }\n  }; // Find css3 support\n\n\n  Plugin.prototype.doCss = function () {\n    // check for css animation support\n    var support = function support() {\n      var transition = ['transition', 'MozTransition', 'WebkitTransition', 'OTransition', 'msTransition', 'KhtmlTransition'];\n      var root = document.documentElement;\n      var i = 0;\n\n      for (i = 0; i < transition.length; i++) {\n        if (transition[i] in root.style) {\n          return true;\n        }\n      }\n    };\n\n    if (support()) {\n      return true;\n    }\n\n    return false;\n  };\n  /**\n   *  @desc Check the given src is video\n   *  @param {String} src\n   *  @return {Object} video type\n   *  Ex:{ youtube  :  [\"//www.youtube.com/watch?v=c0asJgSyxcY\", \"c0asJgSyxcY\"] }\n   */\n\n\n  Plugin.prototype.isVideo = function (src, index) {\n    var html;\n\n    if (this.s.dynamic) {\n      html = this.s.dynamicEl[index].html;\n    } else {\n      html = this.items[index].getAttribute('data-html');\n    }\n\n    if (!src && html) {\n      return {\n        html5: true\n      };\n    }\n\n    var youtube = src.match(/\\/\\/(?:www\\.)?youtu(?:\\.be|be\\.com|be-nocookie\\.com)\\/(?:watch\\?v=|embed\\/)?([a-z0-9\\-\\_\\%]+)/i);\n    var vimeo = src.match(/\\/\\/(?:www\\.)?vimeo.com\\/([0-9a-z\\-_]+)/i);\n    var dailymotion = src.match(/\\/\\/(?:www\\.)?dai.ly\\/([0-9a-z\\-_]+)/i);\n    var vk = src.match(/\\/\\/(?:www\\.)?(?:vk\\.com|vkontakte\\.ru)\\/(?:video_ext\\.php\\?)(.*)/i);\n\n    if (youtube) {\n      return {\n        youtube: youtube\n      };\n    } else if (vimeo) {\n      return {\n        vimeo: vimeo\n      };\n    } else if (dailymotion) {\n      return {\n        dailymotion: dailymotion\n      };\n    } else if (vk) {\n      return {\n        vk: vk\n      };\n    }\n  };\n  /**\n   *  @desc Create image counter\n   *  Ex: 1/10\n   */\n\n\n  Plugin.prototype.counter = function () {\n    if (this.s.counter) {\n      this.outer.querySelector(this.s.appendCounterTo).insertAdjacentHTML('beforeend', '<div id=\"lg-counter\" role=\"status\" aria-live=\"polite\"><span id=\"lg-counter-current\">' + (parseInt(this.index, 10) + 1) + '</span> / <span id=\"lg-counter-all\">' + this.items.length + '</span></div>');\n    }\n  };\n  /**\n   *  @desc add sub-html into the slide\n   *  @param {Number} index - index of the slide\n   */\n\n\n  Plugin.prototype.addHtml = function (index) {\n    var subHtml = null;\n    var currentEle;\n\n    if (this.s.dynamic) {\n      subHtml = this.s.dynamicEl[index].subHtml;\n    } else {\n      currentEle = this.items[index];\n      subHtml = currentEle.getAttribute('data-sub-html');\n\n      if (this.s.getCaptionFromTitleOrAlt && !subHtml) {\n        subHtml = currentEle.getAttribute('title');\n\n        if (subHtml && currentEle.querySelector('img')) {\n          subHtml = currentEle.querySelector('img').getAttribute('alt');\n        }\n      }\n    }\n\n    if (typeof subHtml !== 'undefined' && subHtml !== null) {\n      // get first letter of subhtml\n      // if first letter starts with . or # get the html form the jQuery object\n      var fL = subHtml.substring(0, 1);\n\n      if (fL === '.' || fL === '#') {\n        if (this.s.subHtmlSelectorRelative && !this.s.dynamic) {\n          subHtml = currentEle.querySelector(subHtml).innerHTML;\n        } else {\n          subHtml = document.querySelector(subHtml).innerHTML;\n        }\n      }\n    } else {\n      subHtml = '';\n    }\n\n    if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n      this.outer.querySelector(this.s.appendSubHtmlTo).innerHTML = subHtml;\n    } else {\n      this.___slide[index].insertAdjacentHTML('beforeend', subHtml);\n    } // Add lg-empty-html class if title doesn't exist\n\n\n    if (typeof subHtml !== 'undefined' && subHtml !== null) {\n      if (subHtml === '') {\n        _lgUtils2.default.addClass(this.outer.querySelector(this.s.appendSubHtmlTo), 'lg-empty-html');\n      } else {\n        _lgUtils2.default.removeClass(this.outer.querySelector(this.s.appendSubHtmlTo), 'lg-empty-html');\n      }\n    }\n\n    _lgUtils2.default.trigger(this.el, 'onAfterAppendSubHtml', {\n      index: index\n    });\n  };\n  /**\n   *  @desc Preload slides\n   *  @param {Number} index - index of the slide\n   */\n\n\n  Plugin.prototype.preload = function (index) {\n    var i = 1;\n    var j = 1;\n\n    for (i = 1; i <= this.s.preload; i++) {\n      if (i >= this.items.length - index) {\n        break;\n      }\n\n      this.loadContent(index + i, false, 0);\n    }\n\n    for (j = 1; j <= this.s.preload; j++) {\n      if (index - j < 0) {\n        break;\n      }\n\n      this.loadContent(index - j, false, 0);\n    }\n  };\n  /**\n   *  @desc Load slide content into slide.\n   *  @param {Number} index - index of the slide.\n   *  @param {Boolean} rec - if true call loadcontent() function again.\n   *  @param {Boolean} delay - delay for adding complete class. it is 0 except first time.\n   */\n\n\n  Plugin.prototype.loadContent = function (index, rec, delay) {\n    var _this = this;\n\n    var _hasPoster = false;\n\n    var _img;\n\n    var _src;\n\n    var _poster;\n\n    var _srcset;\n\n    var _sizes;\n\n    var _html;\n\n    var _alt;\n\n    var getResponsiveSrc = function getResponsiveSrc(srcItms) {\n      var rsWidth = [];\n      var rsSrc = [];\n\n      for (var i = 0; i < srcItms.length; i++) {\n        var __src = srcItms[i].split(' '); // Manage empty space\n\n\n        if (__src[0] === '') {\n          __src.splice(0, 1);\n        }\n\n        rsSrc.push(__src[0]);\n        rsWidth.push(__src[1]);\n      }\n\n      var wWidth = window.innerWidth;\n\n      for (var j = 0; j < rsWidth.length; j++) {\n        if (parseInt(rsWidth[j], 10) > wWidth) {\n          _src = rsSrc[j];\n          break;\n        }\n      }\n    };\n\n    if (_this.s.dynamic) {\n      if (_this.s.dynamicEl[index].poster) {\n        _hasPoster = true;\n        _poster = _this.s.dynamicEl[index].poster;\n      }\n\n      _html = _this.s.dynamicEl[index].html;\n      _src = _this.s.dynamicEl[index].src;\n      _alt = _this.s.dynamicEl[index].alt;\n\n      if (_this.s.dynamicEl[index].responsive) {\n        var srcDyItms = _this.s.dynamicEl[index].responsive.split(',');\n\n        getResponsiveSrc(srcDyItms);\n      }\n\n      _srcset = _this.s.dynamicEl[index].srcset;\n      _sizes = _this.s.dynamicEl[index].sizes;\n    } else {\n      if (_this.items[index].getAttribute('data-poster')) {\n        _hasPoster = true;\n        _poster = _this.items[index].getAttribute('data-poster');\n      }\n\n      _html = _this.items[index].getAttribute('data-html');\n      _src = _this.items[index].getAttribute('href') || _this.items[index].getAttribute('data-src');\n      _alt = _this.items[index].getAttribute('title');\n\n      if (_this.items[index].querySelector('img')) {\n        _alt = _alt || _this.items[index].querySelector('img').getAttribute('alt');\n      }\n\n      if (_this.items[index].getAttribute('data-responsive')) {\n        var srcItms = _this.items[index].getAttribute('data-responsive').split(',');\n\n        getResponsiveSrc(srcItms);\n      }\n\n      _srcset = _this.items[index].getAttribute('data-srcset');\n      _sizes = _this.items[index].getAttribute('data-sizes');\n    } //if (_src || _srcset || _sizes || _poster) {\n\n\n    var iframe = false;\n\n    if (_this.s.dynamic) {\n      if (_this.s.dynamicEl[index].iframe) {\n        iframe = true;\n      }\n    } else {\n      if (_this.items[index].getAttribute('data-iframe') === 'true') {\n        iframe = true;\n      }\n    }\n\n    var _isVideo = _this.isVideo(_src, index);\n\n    if (!_lgUtils2.default.hasClass(_this.___slide[index], 'lg-loaded')) {\n      if (iframe) {\n        _this.___slide[index].insertAdjacentHTML('afterbegin', '<div class=\"lg-video-cont\" style=\"max-width:' + _this.s.iframeMaxWidth + '\"><div class=\"lg-video\"><iframe class=\"lg-object\" frameborder=\"0\" src=\"' + _src + '\"  allowfullscreen=\"true\"></iframe></div></div>');\n      } else if (_hasPoster) {\n        var videoClass = '';\n\n        if (_isVideo && _isVideo.youtube) {\n          videoClass = 'lg-has-youtube';\n        } else if (_isVideo && _isVideo.vimeo) {\n          videoClass = 'lg-has-vimeo';\n        } else {\n          videoClass = 'lg-has-html5';\n        }\n\n        _this.___slide[index].insertAdjacentHTML('beforeend', '<div class=\"lg-video-cont ' + videoClass + ' \"><div class=\"lg-video\"><span class=\"lg-video-play\"></span><img class=\"lg-object lg-has-poster\" src=\"' + _poster + '\" /></div></div>');\n      } else if (_isVideo) {\n        _this.___slide[index].insertAdjacentHTML('beforeend', '<div class=\"lg-video-cont \"><div class=\"lg-video\"></div></div>');\n\n        _lgUtils2.default.trigger(_this.el, 'hasVideo', {\n          index: index,\n          src: _src,\n          html: _html\n        });\n      } else {\n        _alt = _alt ? 'alt=\"' + _alt + '\"' : '';\n\n        _this.___slide[index].insertAdjacentHTML('beforeend', '<div class=\"lg-img-wrap\"><img class=\"lg-object lg-image\" ' + _alt + ' src=\"' + _src + '\" /></div>');\n      }\n\n      _lgUtils2.default.trigger(_this.el, 'onAferAppendSlide', {\n        index: index\n      });\n\n      _img = _this.___slide[index].querySelector('.lg-object');\n\n      if (_sizes) {\n        _img.setAttribute('sizes', _sizes);\n      }\n\n      if (_srcset) {\n        _img.setAttribute('srcset', _srcset);\n\n        if (this.s.supportLegacyBrowser) {\n          try {\n            picturefill({\n              elements: [_img[0]]\n            });\n          } catch (e) {\n            console.warn('If you want srcset to be supported for older browsers, ' + 'please include picturefil javascript library in your document.');\n          }\n        }\n      }\n\n      if (this.s.appendSubHtmlTo !== '.lg-sub-html') {\n        _this.addHtml(index);\n      }\n\n      _lgUtils2.default.addClass(_this.___slide[index], 'lg-loaded');\n    }\n\n    _lgUtils2.default.on(_this.___slide[index].querySelector('.lg-object'), 'load.lg error.lg', function () {\n      // For first time add some delay for displaying the start animation.\n      var _speed = 0; // Do not change the delay value because it is required for zoom plugin.\n      // If gallery opened from direct url (hash) speed value should be 0\n\n      if (delay && !_lgUtils2.default.hasClass(document.body, 'lg-from-hash')) {\n        _speed = delay;\n      }\n\n      setTimeout(function () {\n        _lgUtils2.default.addClass(_this.___slide[index], 'lg-complete');\n\n        _lgUtils2.default.trigger(_this.el, 'onSlideItemLoad', {\n          index: index,\n          delay: delay || 0\n        });\n      }, _speed);\n    }); // @todo check load state for html5 videos\n\n\n    if (_isVideo && _isVideo.html5 && !_hasPoster) {\n      _lgUtils2.default.addClass(_this.___slide[index], 'lg-complete');\n    }\n\n    if (rec === true) {\n      if (!_lgUtils2.default.hasClass(_this.___slide[index], 'lg-complete')) {\n        _lgUtils2.default.on(_this.___slide[index].querySelector('.lg-object'), 'load.lg error.lg', function () {\n          _this.preload(index);\n        });\n      } else {\n        _this.preload(index);\n      }\n    } //}\n\n  };\n  /**\n  *   @desc slide function for lightgallery\n      ** Slide() gets call on start\n      ** ** Set lg.on true once slide() function gets called.\n      ** Call loadContent() on slide() function inside setTimeout\n      ** ** On first slide we do not want any animation like slide of fade\n      ** ** So on first slide( if lg.on if false that is first slide) loadContent() should start loading immediately\n      ** ** Else loadContent() should wait for the transition to complete.\n      ** ** So set timeout s.speed + 50\n  <=> ** loadContent() will load slide content in to the particular slide\n      ** ** It has recursion (rec) parameter. if rec === true loadContent() will call preload() function.\n      ** ** preload will execute only when the previous slide is fully loaded (images iframe)\n      ** ** avoid simultaneous image load\n  <=> ** Preload() will check for s.preload value and call loadContent() again accoring to preload value\n      ** loadContent()  <====> Preload();\n  \n  *   @param {Number} index - index of the slide\n  *   @param {Boolean} fromTouch - true if slide function called via touch event or mouse drag\n  *   @param {Boolean} fromThumb - true if slide function called via thumbnail click\n  */\n\n\n  Plugin.prototype.slide = function (index, fromTouch, fromThumb) {\n    var _prevIndex = 0;\n\n    for (var i = 0; i < this.___slide.length; i++) {\n      if (_lgUtils2.default.hasClass(this.___slide[i], 'lg-current')) {\n        _prevIndex = i;\n        break;\n      }\n    }\n\n    var _this = this; // Prevent if multiple call\n    // Required for hsh plugin\n\n\n    if (_this.lGalleryOn && _prevIndex === index) {\n      return;\n    }\n\n    var _length = this.___slide.length;\n\n    var _time = _this.lGalleryOn ? this.s.speed : 0;\n\n    var _next = false;\n    var _prev = false;\n\n    if (!_this.lgBusy) {\n      if (this.s.download) {\n        var _src;\n\n        if (_this.s.dynamic) {\n          _src = _this.s.dynamicEl[index].downloadUrl !== false && (_this.s.dynamicEl[index].downloadUrl || _this.s.dynamicEl[index].src);\n        } else {\n          _src = _this.items[index].getAttribute('data-download-url') !== 'false' && (_this.items[index].getAttribute('data-download-url') || _this.items[index].getAttribute('href') || _this.items[index].getAttribute('data-src'));\n        }\n\n        if (_src) {\n          document.getElementById('lg-download').setAttribute('href', _src);\n\n          _lgUtils2.default.removeClass(_this.outer, 'lg-hide-download');\n        } else {\n          _lgUtils2.default.addClass(_this.outer, 'lg-hide-download');\n        }\n      }\n\n      _lgUtils2.default.trigger(_this.el, 'onBeforeSlide', {\n        prevIndex: _prevIndex,\n        index: index,\n        fromTouch: fromTouch,\n        fromThumb: fromThumb\n      });\n\n      _this.lgBusy = true;\n      clearTimeout(_this.hideBartimeout); // Add title if this.s.appendSubHtmlTo === lg-sub-html\n\n      if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n        // wait for slide animation to complete\n        setTimeout(function () {\n          _this.addHtml(index);\n        }, _time);\n      }\n\n      this.arrowDisable(index);\n\n      if (!fromTouch) {\n        // remove all transitions\n        _lgUtils2.default.addClass(_this.outer, 'lg-no-trans');\n\n        for (var j = 0; j < this.___slide.length; j++) {\n          _lgUtils2.default.removeClass(this.___slide[j], 'lg-prev-slide');\n\n          _lgUtils2.default.removeClass(this.___slide[j], 'lg-next-slide');\n        }\n\n        if (index < _prevIndex) {\n          _prev = true;\n\n          if (index === 0 && _prevIndex === _length - 1 && !fromThumb) {\n            _prev = false;\n            _next = true;\n          }\n        } else if (index > _prevIndex) {\n          _next = true;\n\n          if (index === _length - 1 && _prevIndex === 0 && !fromThumb) {\n            _prev = true;\n            _next = false;\n          }\n        }\n\n        if (_prev) {\n          //prevslide\n          _lgUtils2.default.addClass(this.___slide[index], 'lg-prev-slide');\n\n          _lgUtils2.default.addClass(this.___slide[_prevIndex], 'lg-next-slide');\n        } else if (_next) {\n          // next slide\n          _lgUtils2.default.addClass(this.___slide[index], 'lg-next-slide');\n\n          _lgUtils2.default.addClass(this.___slide[_prevIndex], 'lg-prev-slide');\n        } // give 50 ms for browser to add/remove class\n\n\n        setTimeout(function () {\n          _lgUtils2.default.removeClass(_this.outer.querySelector('.lg-current'), 'lg-current'); //_this.$slide.eq(_prevIndex).removeClass('lg-current');\n\n\n          _lgUtils2.default.addClass(_this.___slide[index], 'lg-current'); // reset all transitions\n\n\n          _lgUtils2.default.removeClass(_this.outer, 'lg-no-trans');\n        }, 50);\n      } else {\n        var touchPrev = index - 1;\n        var touchNext = index + 1;\n\n        if (index === 0 && _prevIndex === _length - 1) {\n          // next slide\n          touchNext = 0;\n          touchPrev = _length - 1;\n        } else if (index === _length - 1 && _prevIndex === 0) {\n          // prev slide\n          touchNext = 0;\n          touchPrev = _length - 1;\n        }\n\n        _lgUtils2.default.removeClass(_this.outer.querySelector('.lg-prev-slide'), 'lg-prev-slide');\n\n        _lgUtils2.default.removeClass(_this.outer.querySelector('.lg-current'), 'lg-current');\n\n        _lgUtils2.default.removeClass(_this.outer.querySelector('.lg-next-slide'), 'lg-next-slide');\n\n        _lgUtils2.default.addClass(_this.___slide[touchPrev], 'lg-prev-slide');\n\n        _lgUtils2.default.addClass(_this.___slide[touchNext], 'lg-next-slide');\n\n        _lgUtils2.default.addClass(_this.___slide[index], 'lg-current');\n      }\n\n      if (_this.lGalleryOn) {\n        setTimeout(function () {\n          _this.loadContent(index, true, 0);\n        }, this.s.speed + 50);\n        setTimeout(function () {\n          _this.lgBusy = false;\n\n          _lgUtils2.default.trigger(_this.el, 'onAfterSlide', {\n            prevIndex: _prevIndex,\n            index: index,\n            fromTouch: fromTouch,\n            fromThumb: fromThumb\n          });\n        }, this.s.speed);\n      } else {\n        _this.loadContent(index, true, _this.s.backdropDuration);\n\n        _this.lgBusy = false;\n\n        _lgUtils2.default.trigger(_this.el, 'onAfterSlide', {\n          prevIndex: _prevIndex,\n          index: index,\n          fromTouch: fromTouch,\n          fromThumb: fromThumb\n        });\n      }\n\n      _this.lGalleryOn = true;\n\n      if (this.s.counter) {\n        if (document.getElementById('lg-counter-current')) {\n          document.getElementById('lg-counter-current').innerHTML = index + 1;\n        }\n      }\n    }\n  };\n  /**\n   *  @desc Go to next slide\n   *  @param {Boolean} fromTouch - true if slide function called via touch event\n   */\n\n\n  Plugin.prototype.goToNextSlide = function (fromTouch) {\n    var _this = this;\n\n    if (!_this.lgBusy) {\n      if (_this.index + 1 < _this.___slide.length) {\n        _this.index++;\n\n        _lgUtils2.default.trigger(_this.el, 'onBeforeNextSlide', {\n          index: _this.index\n        });\n\n        _this.slide(_this.index, fromTouch, false);\n      } else {\n        if (_this.s.loop) {\n          _this.index = 0;\n\n          _lgUtils2.default.trigger(_this.el, 'onBeforeNextSlide', {\n            index: _this.index\n          });\n\n          _this.slide(_this.index, fromTouch, false);\n        } else if (_this.s.slideEndAnimatoin) {\n          _lgUtils2.default.addClass(_this.outer, 'lg-right-end');\n\n          setTimeout(function () {\n            _lgUtils2.default.removeClass(_this.outer, 'lg-right-end');\n          }, 400);\n        }\n      }\n    }\n  };\n  /**\n   *  @desc Go to previous slide\n   *  @param {Boolean} fromTouch - true if slide function called via touch event\n   */\n\n\n  Plugin.prototype.goToPrevSlide = function (fromTouch) {\n    var _this = this;\n\n    if (!_this.lgBusy) {\n      if (_this.index > 0) {\n        _this.index--;\n\n        _lgUtils2.default.trigger(_this.el, 'onBeforePrevSlide', {\n          index: _this.index,\n          fromTouch: fromTouch\n        });\n\n        _this.slide(_this.index, fromTouch, false);\n      } else {\n        if (_this.s.loop) {\n          _this.index = _this.items.length - 1;\n\n          _lgUtils2.default.trigger(_this.el, 'onBeforePrevSlide', {\n            index: _this.index,\n            fromTouch: fromTouch\n          });\n\n          _this.slide(_this.index, fromTouch, false);\n        } else if (_this.s.slideEndAnimatoin) {\n          _lgUtils2.default.addClass(_this.outer, 'lg-left-end');\n\n          setTimeout(function () {\n            _lgUtils2.default.removeClass(_this.outer, 'lg-left-end');\n          }, 400);\n        }\n      }\n    }\n  };\n\n  Plugin.prototype.keyPress = function () {\n    var _this = this;\n\n    if (this.items.length > 1) {\n      _lgUtils2.default.on(window, 'keyup.lg', function (e) {\n        if (_this.items.length > 1) {\n          if (e.keyCode === 37) {\n            e.preventDefault();\n\n            _this.goToPrevSlide();\n          }\n\n          if (e.keyCode === 39) {\n            e.preventDefault();\n\n            _this.goToNextSlide();\n          }\n        }\n      });\n    }\n\n    _lgUtils2.default.on(window, 'keydown.lg', function (e) {\n      if (_this.s.escKey === true && e.keyCode === 27) {\n        e.preventDefault();\n\n        if (!_lgUtils2.default.hasClass(_this.outer, 'lg-thumb-open')) {\n          _this.destroy();\n        } else {\n          _lgUtils2.default.removeClass(_this.outer, 'lg-thumb-open');\n        }\n      }\n    });\n  };\n\n  Plugin.prototype.arrow = function () {\n    var _this = this;\n\n    _lgUtils2.default.on(this.outer.querySelector('.lg-prev'), 'click.lg', function () {\n      _this.goToPrevSlide();\n    });\n\n    _lgUtils2.default.on(this.outer.querySelector('.lg-next'), 'click.lg', function () {\n      _this.goToNextSlide();\n    });\n  };\n\n  Plugin.prototype.arrowDisable = function (index) {\n    // Disable arrows if s.hideControlOnEnd is true\n    if (!this.s.loop && this.s.hideControlOnEnd) {\n      var next = this.outer.querySelector('.lg-next');\n      var prev = this.outer.querySelector('.lg-prev');\n\n      if (index + 1 < this.___slide.length) {\n        next.removeAttribute('disabled');\n\n        _lgUtils2.default.removeClass(next, 'disabled');\n      } else {\n        next.setAttribute('disabled', 'disabled');\n\n        _lgUtils2.default.addClass(next, 'disabled');\n      }\n\n      if (index > 0) {\n        prev.removeAttribute('disabled');\n\n        _lgUtils2.default.removeClass(prev, 'disabled');\n      } else {\n        prev.setAttribute('disabled', 'disabled');\n\n        _lgUtils2.default.addClass(prev, 'disabled');\n      }\n    }\n  };\n\n  Plugin.prototype.setTranslate = function (el, xValue, yValue) {\n    // jQuery supports Automatic CSS prefixing since jQuery 1.8.0\n    if (this.s.useLeft) {\n      el.style.left = xValue;\n    } else {\n      _lgUtils2.default.setVendor(el, 'Transform', 'translate3d(' + xValue + 'px, ' + yValue + 'px, 0px)');\n    }\n  };\n\n  Plugin.prototype.touchMove = function (startCoords, endCoords) {\n    var distance = endCoords - startCoords;\n\n    if (Math.abs(distance) > 15) {\n      // reset opacity and transition duration\n      _lgUtils2.default.addClass(this.outer, 'lg-dragging'); // move current slide\n\n\n      this.setTranslate(this.___slide[this.index], distance, 0); // move next and prev slide with current slide\n\n      this.setTranslate(document.querySelector('.lg-prev-slide'), -this.___slide[this.index].clientWidth + distance, 0);\n      this.setTranslate(document.querySelector('.lg-next-slide'), this.___slide[this.index].clientWidth + distance, 0);\n    }\n  };\n\n  Plugin.prototype.touchEnd = function (distance) {\n    var _this = this; // keep slide animation for any mode while dragg/swipe\n\n\n    if (_this.s.mode !== 'lg-slide') {\n      _lgUtils2.default.addClass(_this.outer, 'lg-slide');\n    }\n\n    for (var i = 0; i < this.___slide.length; i++) {\n      if (!_lgUtils2.default.hasClass(this.___slide[i], 'lg-current') && !_lgUtils2.default.hasClass(this.___slide[i], 'lg-prev-slide') && !_lgUtils2.default.hasClass(this.___slide[i], 'lg-next-slide')) {\n        this.___slide[i].style.opacity = '0';\n      }\n    } // set transition duration\n\n\n    setTimeout(function () {\n      _lgUtils2.default.removeClass(_this.outer, 'lg-dragging');\n\n      if (distance < 0 && Math.abs(distance) > _this.s.swipeThreshold) {\n        _this.goToNextSlide(true);\n      } else if (distance > 0 && Math.abs(distance) > _this.s.swipeThreshold) {\n        _this.goToPrevSlide(true);\n      } else if (Math.abs(distance) < 5) {\n        // Trigger click if distance is less than 5 pix\n        _lgUtils2.default.trigger(_this.el, 'onSlideClick');\n      }\n\n      for (var i = 0; i < _this.___slide.length; i++) {\n        _this.___slide[i].removeAttribute('style');\n      }\n    }); // remove slide class once drag/swipe is completed if mode is not slide\n\n    setTimeout(function () {\n      if (!_lgUtils2.default.hasClass(_this.outer, 'lg-dragging') && _this.s.mode !== 'lg-slide') {\n        _lgUtils2.default.removeClass(_this.outer, 'lg-slide');\n      }\n    }, _this.s.speed + 100);\n  };\n\n  Plugin.prototype.enableSwipe = function () {\n    var _this = this;\n\n    var startCoords = 0;\n    var endCoords = 0;\n    var isMoved = false;\n\n    if (_this.s.enableSwipe && _this.isTouch && _this.doCss()) {\n      for (var i = 0; i < _this.___slide.length; i++) {\n        /*jshint loopfunc: true */\n        _lgUtils2.default.on(_this.___slide[i], 'touchstart.lg', function (e) {\n          if (!_lgUtils2.default.hasClass(_this.outer, 'lg-zoomed') && !_this.lgBusy) {\n            e.preventDefault();\n\n            _this.manageSwipeClass();\n\n            startCoords = e.targetTouches[0].pageX;\n          }\n        });\n      }\n\n      for (var j = 0; j < _this.___slide.length; j++) {\n        /*jshint loopfunc: true */\n        _lgUtils2.default.on(_this.___slide[j], 'touchmove.lg', function (e) {\n          if (!_lgUtils2.default.hasClass(_this.outer, 'lg-zoomed')) {\n            e.preventDefault();\n            endCoords = e.targetTouches[0].pageX;\n\n            _this.touchMove(startCoords, endCoords);\n\n            isMoved = true;\n          }\n        });\n      }\n\n      for (var k = 0; k < _this.___slide.length; k++) {\n        /*jshint loopfunc: true */\n        _lgUtils2.default.on(_this.___slide[k], 'touchend.lg', function () {\n          if (!_lgUtils2.default.hasClass(_this.outer, 'lg-zoomed')) {\n            if (isMoved) {\n              isMoved = false;\n\n              _this.touchEnd(endCoords - startCoords);\n            } else {\n              _lgUtils2.default.trigger(_this.el, 'onSlideClick');\n            }\n          }\n        });\n      }\n    }\n  };\n\n  Plugin.prototype.enableDrag = function () {\n    var _this = this;\n\n    var startCoords = 0;\n    var endCoords = 0;\n    var isDraging = false;\n    var isMoved = false;\n\n    if (_this.s.enableDrag && !_this.isTouch && _this.doCss()) {\n      for (var i = 0; i < _this.___slide.length; i++) {\n        /*jshint loopfunc: true */\n        _lgUtils2.default.on(_this.___slide[i], 'mousedown.lg', function (e) {\n          // execute only on .lg-object\n          if (!_lgUtils2.default.hasClass(_this.outer, 'lg-zoomed')) {\n            if (_lgUtils2.default.hasClass(e.target, 'lg-object') || _lgUtils2.default.hasClass(e.target, 'lg-video-play')) {\n              e.preventDefault();\n\n              if (!_this.lgBusy) {\n                _this.manageSwipeClass();\n\n                startCoords = e.pageX;\n                isDraging = true; // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\n\n                _this.outer.scrollLeft += 1;\n                _this.outer.scrollLeft -= 1; // *\n\n                _lgUtils2.default.removeClass(_this.outer, 'lg-grab');\n\n                _lgUtils2.default.addClass(_this.outer, 'lg-grabbing');\n\n                _lgUtils2.default.trigger(_this.el, 'onDragstart');\n              }\n            }\n          }\n        });\n      }\n\n      _lgUtils2.default.on(window, 'mousemove.lg', function (e) {\n        if (isDraging) {\n          isMoved = true;\n          endCoords = e.pageX;\n\n          _this.touchMove(startCoords, endCoords);\n\n          _lgUtils2.default.trigger(_this.el, 'onDragmove');\n        }\n      });\n\n      _lgUtils2.default.on(window, 'mouseup.lg', function (e) {\n        if (isMoved) {\n          isMoved = false;\n\n          _this.touchEnd(endCoords - startCoords);\n\n          _lgUtils2.default.trigger(_this.el, 'onDragend');\n        } else if (_lgUtils2.default.hasClass(e.target, 'lg-object') || _lgUtils2.default.hasClass(e.target, 'lg-video-play')) {\n          _lgUtils2.default.trigger(_this.el, 'onSlideClick');\n        } // Prevent execution on click\n\n\n        if (isDraging) {\n          isDraging = false;\n\n          _lgUtils2.default.removeClass(_this.outer, 'lg-grabbing');\n\n          _lgUtils2.default.addClass(_this.outer, 'lg-grab');\n        }\n      });\n    }\n  };\n\n  Plugin.prototype.manageSwipeClass = function () {\n    var touchNext = this.index + 1;\n    var touchPrev = this.index - 1;\n    var length = this.___slide.length;\n\n    if (this.s.loop) {\n      if (this.index === 0) {\n        touchPrev = length - 1;\n      } else if (this.index === length - 1) {\n        touchNext = 0;\n      }\n    }\n\n    for (var i = 0; i < this.___slide.length; i++) {\n      _lgUtils2.default.removeClass(this.___slide[i], 'lg-next-slide');\n\n      _lgUtils2.default.removeClass(this.___slide[i], 'lg-prev-slide');\n    }\n\n    if (touchPrev > -1) {\n      _lgUtils2.default.addClass(this.___slide[touchPrev], 'lg-prev-slide');\n    }\n\n    _lgUtils2.default.addClass(this.___slide[touchNext], 'lg-next-slide');\n  };\n\n  Plugin.prototype.mousewheel = function () {\n    var _this = this;\n\n    _lgUtils2.default.on(_this.outer, 'mousewheel.lg', function (e) {\n      if (!e.deltaY) {\n        return;\n      }\n\n      if (e.deltaY > 0) {\n        _this.goToPrevSlide();\n      } else {\n        _this.goToNextSlide();\n      }\n\n      e.preventDefault();\n    });\n  };\n\n  Plugin.prototype.closeGallery = function () {\n    var _this = this;\n\n    var mousedown = false;\n\n    _lgUtils2.default.on(this.outer.querySelector('.lg-close'), 'click.lg', function () {\n      _this.destroy();\n    });\n\n    if (_this.s.closable) {\n      // If you drag the slide and release outside gallery gets close on chrome\n      // for preventing this check mousedown and mouseup happened on .lg-item or lg-outer\n      _lgUtils2.default.on(_this.outer, 'mousedown.lg', function (e) {\n        if (_lgUtils2.default.hasClass(e.target, 'lg-outer') || _lgUtils2.default.hasClass(e.target, 'lg-item') || _lgUtils2.default.hasClass(e.target, 'lg-img-wrap')) {\n          mousedown = true;\n        } else {\n          mousedown = false;\n        }\n      });\n\n      _lgUtils2.default.on(_this.outer, 'mouseup.lg', function (e) {\n        if (_lgUtils2.default.hasClass(e.target, 'lg-outer') || _lgUtils2.default.hasClass(e.target, 'lg-item') || _lgUtils2.default.hasClass(e.target, 'lg-img-wrap') && mousedown) {\n          if (!_lgUtils2.default.hasClass(_this.outer, 'lg-dragging')) {\n            _this.destroy();\n          }\n        }\n      });\n    }\n  };\n\n  Plugin.prototype.destroy = function (d) {\n    var _this = this;\n\n    if (!d) {\n      _lgUtils2.default.trigger(_this.el, 'onBeforeClose');\n    }\n\n    document.body.scrollTop = _this.prevScrollTop;\n    document.documentElement.scrollTop = _this.prevScrollTop;\n    /**\n     * if d is false or undefined destroy will only close the gallery\n     * plugins instance remains with the element\n     *\n     * if d is true destroy will completely remove the plugin\n     */\n\n    if (d) {\n      if (!_this.s.dynamic) {\n        // only when not using dynamic mode is $items a jquery collection\n        for (var i = 0; i < this.items.length; i++) {\n          _lgUtils2.default.off(this.items[i], '.lg');\n\n          _lgUtils2.default.off(this.items[i], '.lgcustom');\n        }\n      }\n\n      var lguid = _this.el.getAttribute('lg-uid');\n\n      delete window.lgData[lguid];\n\n      _this.el.removeAttribute('lg-uid');\n    } // Unbind all events added by lightGallery\n\n\n    _lgUtils2.default.off(this.el, '.lgtm'); // Distroy all lightGallery modules\n\n\n    for (var key in window.lgModules) {\n      if (_this.modules[key]) {\n        _this.modules[key].destroy(d);\n      }\n    }\n\n    this.lGalleryOn = false;\n    clearTimeout(_this.hideBartimeout);\n    this.hideBartimeout = false;\n\n    _lgUtils2.default.off(window, '.lg');\n\n    _lgUtils2.default.removeClass(document.body, 'lg-on');\n\n    _lgUtils2.default.removeClass(document.body, 'lg-from-hash');\n\n    if (_this.outer) {\n      _lgUtils2.default.removeClass(_this.outer, 'lg-visible');\n    }\n\n    _lgUtils2.default.removeClass(document.querySelector('.lg-backdrop'), 'in');\n\n    setTimeout(function () {\n      try {\n        if (_this.outer) {\n          _this.outer.parentNode.removeChild(_this.outer);\n        }\n\n        if (document.querySelector('.lg-backdrop')) {\n          document.querySelector('.lg-backdrop').parentNode.removeChild(document.querySelector('.lg-backdrop'));\n        }\n\n        if (!d) {\n          _lgUtils2.default.trigger(_this.el, 'onCloseAfter');\n        }\n\n        _this.el.focus();\n      } catch (err) {}\n    }, _this.s.backdropDuration + 50);\n  };\n\n  window.lightGallery = function (el, options) {\n    if (!el) {\n      return;\n    }\n\n    try {\n      if (!el.getAttribute('lg-uid')) {\n        var uid = 'lg' + window.lgData.uid++;\n        window.lgData[uid] = new Plugin(el, options);\n        el.setAttribute('lg-uid', uid);\n      } else {\n        window.lgData[el.getAttribute('lg-uid')].init();\n      }\n    } catch (err) {\n      console.error('lightGallery has not initiated properly', err);\n    }\n  };\n});","map":{"version":3,"sources":["/Users/debpratiher/Downloads/quicky-messenger-v1.3/quicky-messanger/node_modules/lightgallery.js/lib/js/lightgallery.js"],"names":["global","factory","define","amd","exports","require","mod","lgUtils","lightgallery","_lgUtils","_lgUtils2","_interopRequireDefault","obj","__esModule","default","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","window","CustomEvent","event","params","bubbles","cancelable","detail","undefined","evt","document","createEvent","initCustomEvent","Event","utils","lgData","uid","lgModules","defaults","mode","cssEasing","easing","speed","height","width","addClass","startClass","backdropDuration","hideBarsDelay","useLeft","ariaLabelledby","ariaDescribedby","closable","loop","escKey","keyPress","controls","slideEndAnimatoin","hideControlOnEnd","mousewheel","getCaptionFromTitleOrAlt","appendSubHtmlTo","subHtmlSelectorRelative","preload","showAfterLoad","selector","selectWithin","nextHtml","prevHtml","index","iframeMaxWidth","download","counter","appendCounterTo","swipeThreshold","enableSwipe","enableDrag","dynamic","dynamicEl","galleryId","supportLegacyBrowser","Plugin","element","options","el","s","constructor","Array","modules","lGalleryOn","lgBusy","hideBartimeout","isTouch","documentElement","items","push","querySelector","querySelectorAll","children","___slide","outer","init","_this","_hash","location","hash","indexOf","parseInt","split","body","hasClass","setTimeout","build","trigger","on","e","preventDefault","structure","slide","arrow","closeGallery","initialHideBarTimeout","clearTimeout","removeClass","list","subHtmlCont","template","insertAdjacentHTML","setVendor","focus","setTop","doCss","inner","prevScrollTop","scrollTop","wH","innerHeight","top","lGallery","style","support","transition","root","isVideo","src","html","getAttribute","html5","youtube","match","vimeo","dailymotion","vk","addHtml","subHtml","currentEle","fL","substring","innerHTML","j","loadContent","rec","delay","_hasPoster","_img","_src","_poster","_srcset","_sizes","_html","_alt","getResponsiveSrc","srcItms","rsWidth","rsSrc","__src","splice","wWidth","innerWidth","poster","alt","responsive","srcDyItms","srcset","sizes","iframe","_isVideo","videoClass","setAttribute","picturefill","elements","console","warn","_speed","fromTouch","fromThumb","_prevIndex","_length","_time","_next","_prev","downloadUrl","getElementById","prevIndex","arrowDisable","touchPrev","touchNext","goToNextSlide","goToPrevSlide","keyCode","destroy","next","prev","removeAttribute","setTranslate","xValue","yValue","left","touchMove","startCoords","endCoords","distance","Math","abs","clientWidth","touchEnd","opacity","isMoved","manageSwipeClass","targetTouches","pageX","k","isDraging","scrollLeft","deltaY","mousedown","d","off","lguid","parentNode","removeChild","err","lightGallery","error"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['./lg-utils'], factory);\n    } else if (typeof exports !== \"undefined\") {\n        factory(require('./lg-utils'));\n    } else {\n        var mod = {\n            exports: {}\n        };\n        factory(global.lgUtils);\n        global.lightgallery = mod.exports;\n    }\n})(this, function (_lgUtils) {\n    'use strict';\n\n    var _lgUtils2 = _interopRequireDefault(_lgUtils);\n\n    function _interopRequireDefault(obj) {\n        return obj && obj.__esModule ? obj : {\n            default: obj\n        };\n    }\n\n    var _extends = Object.assign || function (target) {\n        for (var i = 1; i < arguments.length; i++) {\n            var source = arguments[i];\n\n            for (var key in source) {\n                if (Object.prototype.hasOwnProperty.call(source, key)) {\n                    target[key] = source[key];\n                }\n            }\n        }\n\n        return target;\n    };\n\n    /** Polyfill the CustomEvent() constructor functionality in Internet Explorer 9 and higher */\n    (function () {\n\n        if (typeof window.CustomEvent === 'function') {\n            return false;\n        }\n\n        function CustomEvent(event, params) {\n            params = params || {\n                bubbles: false,\n                cancelable: false,\n                detail: undefined\n            };\n            var evt = document.createEvent('CustomEvent');\n            evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n            return evt;\n        }\n\n        CustomEvent.prototype = window.Event.prototype;\n\n        window.CustomEvent = CustomEvent;\n    })();\n\n    window.utils = _lgUtils2.default;\n    window.lgData = {\n        uid: 0\n    };\n\n    window.lgModules = {};\n    var defaults = {\n\n        mode: 'lg-slide',\n\n        // Ex : 'ease'\n        cssEasing: 'ease',\n\n        //'for jquery animation'\n        easing: 'linear',\n        speed: 600,\n        height: '100%',\n        width: '100%',\n        addClass: '',\n        startClass: 'lg-start-zoom',\n        backdropDuration: 150,\n\n        // Set 0, if u don't want to hide the controls \n        hideBarsDelay: 6000,\n\n        useLeft: false,\n\n        // aria-labelledby attribute fot gallery\n        ariaLabelledby: '',\n\n        //aria-describedby attribute for gallery\n        ariaDescribedby: '',\n\n        closable: true,\n        loop: true,\n        escKey: true,\n        keyPress: true,\n        controls: true,\n        slideEndAnimatoin: true,\n        hideControlOnEnd: false,\n        mousewheel: false,\n\n        getCaptionFromTitleOrAlt: true,\n\n        // .lg-item || '.lg-sub-html'\n        appendSubHtmlTo: '.lg-sub-html',\n\n        subHtmlSelectorRelative: false,\n\n        /**\n         * @desc number of preload slides\n         * will exicute only after the current slide is fully loaded.\n         *\n         * @ex you clicked on 4th image and if preload = 1 then 3rd slide and 5th\n         * slide will be loaded in the background after the 4th slide is fully loaded..\n         * if preload is 2 then 2nd 3rd 5th 6th slides will be preloaded.. ... ...\n         *\n         */\n        preload: 1,\n        showAfterLoad: true,\n        selector: '',\n        selectWithin: '',\n        nextHtml: '',\n        prevHtml: '',\n\n        // 0, 1\n        index: false,\n\n        iframeMaxWidth: '100%',\n\n        download: true,\n        counter: true,\n        appendCounterTo: '.lg-toolbar',\n\n        swipeThreshold: 50,\n        enableSwipe: true,\n        enableDrag: true,\n\n        dynamic: false,\n        dynamicEl: [],\n        galleryId: 1,\n        supportLegacyBrowser: true\n    };\n\n    function Plugin(element, options) {\n\n        // Current lightGallery element\n        this.el = element;\n\n        // lightGallery settings\n        this.s = _extends({}, defaults, options);\n\n        // When using dynamic mode, ensure dynamicEl is an array\n        if (this.s.dynamic && this.s.dynamicEl !== 'undefined' && this.s.dynamicEl.constructor === Array && !this.s.dynamicEl.length) {\n            throw 'When using dynamic mode, you must also define dynamicEl as an Array.';\n        }\n\n        // lightGallery modules\n        this.modules = {};\n\n        // false when lightgallery complete first slide;\n        this.lGalleryOn = false;\n\n        this.lgBusy = false;\n\n        // Timeout function for hiding controls;\n        this.hideBartimeout = false;\n\n        // To determine browser supports for touch events;\n        this.isTouch = 'ontouchstart' in document.documentElement;\n\n        // Disable hideControlOnEnd if sildeEndAnimation is true\n        if (this.s.slideEndAnimatoin) {\n            this.s.hideControlOnEnd = false;\n        }\n\n        this.items = [];\n\n        // Gallery items\n        if (this.s.dynamic) {\n            this.items = this.s.dynamicEl;\n        } else {\n            if (this.s.selector === 'this') {\n                this.items.push(this.el);\n            } else if (this.s.selector !== '') {\n                if (this.s.selectWithin) {\n                    this.items = document.querySelector(this.s.selectWithin).querySelectorAll(this.s.selector);\n                } else {\n                    this.items = this.el.querySelectorAll(this.s.selector);\n                }\n            } else {\n                this.items = this.el.children;\n            }\n        }\n\n        // .lg-item\n\n        this.___slide = '';\n\n        // .lg-outer\n        this.outer = '';\n\n        this.init();\n\n        return this;\n    }\n\n    Plugin.prototype.init = function () {\n\n        var _this = this;\n\n        // s.preload should not be more than $item.length\n        if (_this.s.preload > _this.items.length) {\n            _this.s.preload = _this.items.length;\n        }\n\n        // if dynamic option is enabled execute immediately\n        var _hash = window.location.hash;\n        if (_hash.indexOf('lg=' + this.s.galleryId) > 0) {\n\n            _this.index = parseInt(_hash.split('&slide=')[1], 10);\n\n            _lgUtils2.default.addClass(document.body, 'lg-from-hash');\n            if (!_lgUtils2.default.hasClass(document.body, 'lg-on')) {\n                _lgUtils2.default.addClass(document.body, 'lg-on');\n                setTimeout(function () {\n                    _this.build(_this.index);\n                });\n            }\n        }\n\n        if (_this.s.dynamic) {\n\n            _lgUtils2.default.trigger(this.el, 'onBeforeOpen');\n\n            _this.index = _this.s.index || 0;\n\n            // prevent accidental double execution\n            if (!_lgUtils2.default.hasClass(document.body, 'lg-on')) {\n                _lgUtils2.default.addClass(document.body, 'lg-on');\n                setTimeout(function () {\n                    _this.build(_this.index);\n                });\n            }\n        } else {\n\n            for (var i = 0; i < _this.items.length; i++) {\n\n                /*jshint loopfunc: true */\n                (function (index) {\n\n                    // Using different namespace for click because click event should not unbind if selector is same object('this')\n                    _lgUtils2.default.on(_this.items[index], 'click.lgcustom', function (e) {\n\n                        e.preventDefault();\n\n                        _lgUtils2.default.trigger(_this.el, 'onBeforeOpen');\n\n                        _this.index = _this.s.index || index;\n\n                        if (!_lgUtils2.default.hasClass(document.body, 'lg-on')) {\n                            _this.build(_this.index);\n                            _lgUtils2.default.addClass(document.body, 'lg-on');\n                        }\n                    });\n                })(i);\n            }\n        }\n    };\n\n    Plugin.prototype.build = function (index) {\n\n        var _this = this;\n\n        _this.structure();\n\n        for (var key in window.lgModules) {\n            _this.modules[key] = new window.lgModules[key](_this.el);\n        }\n\n        // initiate slide function\n        _this.slide(index, false, false);\n\n        if (_this.s.keyPress) {\n            _this.keyPress();\n        }\n\n        if (_this.items.length > 1) {\n\n            _this.arrow();\n\n            setTimeout(function () {\n                _this.enableDrag();\n                _this.enableSwipe();\n            }, 50);\n\n            if (_this.s.mousewheel) {\n                _this.mousewheel();\n            }\n        }\n\n        _this.counter();\n\n        _this.closeGallery();\n\n        _lgUtils2.default.trigger(_this.el, 'onAfterOpen');\n\n        // Hide controllers if mouse doesn't move for some period\n        if (_this.s.hideBarsDelay > 0) {\n\n            // Hide controls if user doesn't use mouse or touch after opening gallery\n            var initialHideBarTimeout = setTimeout(function () {\n                _lgUtils2.default.addClass(_this.outer, 'lg-hide-items');\n            }, _this.s.hideBarsDelay);\n            _lgUtils2.default.on(_this.outer, 'mousemove.lg click.lg touchstart.lg', function () {\n\n                // Cancel initalHideBarTimout if user uses mouse or touch events\n                // Before it fires\n                clearTimeout(initialHideBarTimeout);\n\n                _lgUtils2.default.removeClass(_this.outer, 'lg-hide-items');\n\n                clearTimeout(_this.hideBartimeout);\n\n                // Timeout will be cleared on each slide movement also\n                _this.hideBartimeout = setTimeout(function () {\n                    _lgUtils2.default.addClass(_this.outer, 'lg-hide-items');\n                }, _this.s.hideBarsDelay);\n            });\n        }\n    };\n\n    Plugin.prototype.structure = function () {\n        var list = '';\n        var controls = '';\n        var i = 0;\n        var subHtmlCont = '';\n        var template;\n        var _this = this;\n\n        document.body.insertAdjacentHTML('beforeend', '<div class=\"lg-backdrop\"></div>');\n        _lgUtils2.default.setVendor(document.querySelector('.lg-backdrop'), 'TransitionDuration', this.s.backdropDuration + 'ms');\n\n        // Create gallery items\n        for (i = 0; i < this.items.length; i++) {\n            list += '<div class=\"lg-item\"></div>';\n        }\n\n        // Create controlls\n        if (this.s.controls && this.items.length > 1) {\n            controls = '<div class=\"lg-actions\">' + '<button type=\"button\" aria-label=\"Previous slide\" class=\"lg-prev lg-icon\">' + this.s.prevHtml + '</button>' + '<button type=\"button\" aria-label=\"Next slide\" class=\"lg-next lg-icon\">' + this.s.nextHtml + '</button>' + '</div>';\n        }\n\n        if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n            subHtmlCont = '<div role=\"status\" aria-live=\"polite\" class=\"lg-sub-html\"></div>';\n        }\n\n        var ariaLabelledby = this.s.ariaLabelledby ? 'aria-labelledby=\"' + this.s.ariaLabelledby + '\"' : '';\n        var ariaDescribedby = this.s.ariaDescribedby ? 'aria-describedby=\"' + this.s.ariaDescribedby + '\"' : '';\n\n        template = '<div tabindex=\"-1\" aria-modal=\"true\" ' + ariaLabelledby + ' ' + ariaDescribedby + ' role=\"dialog\" class=\"lg-outer ' + this.s.addClass + ' ' + this.s.startClass + '\">' + '<div class=\"lg\" style=\"width:' + this.s.width + '; height:' + this.s.height + '\">' + '<div class=\"lg-inner\">' + list + '</div>' + '<div class=\"lg-toolbar lg-group\">' + '<button type=\"button\" aria-label=\"Close gallery\" class=\"lg-close lg-icon\"></button>' + '</div>' + controls + subHtmlCont + '</div>' + '</div>';\n\n        document.body.insertAdjacentHTML('beforeend', template);\n        this.outer = document.querySelector('.lg-outer');\n        this.outer.focus();\n        this.___slide = this.outer.querySelectorAll('.lg-item');\n\n        if (this.s.useLeft) {\n            _lgUtils2.default.addClass(this.outer, 'lg-use-left');\n\n            // Set mode lg-slide if use left is true;\n            this.s.mode = 'lg-slide';\n        } else {\n            _lgUtils2.default.addClass(this.outer, 'lg-use-css3');\n        }\n\n        // For fixed height gallery\n        _this.setTop();\n        _lgUtils2.default.on(window, 'resize.lg orientationchange.lg', function () {\n            setTimeout(function () {\n                _this.setTop();\n            }, 100);\n        });\n\n        // add class lg-current to remove initial transition\n        _lgUtils2.default.addClass(this.___slide[this.index], 'lg-current');\n\n        // add Class for css support and transition mode\n        if (this.doCss()) {\n            _lgUtils2.default.addClass(this.outer, 'lg-css3');\n        } else {\n            _lgUtils2.default.addClass(this.outer, 'lg-css');\n\n            // Set speed 0 because no animation will happen if browser doesn't support css3\n            this.s.speed = 0;\n        }\n\n        _lgUtils2.default.addClass(this.outer, this.s.mode);\n\n        if (this.s.enableDrag && this.items.length > 1) {\n            _lgUtils2.default.addClass(this.outer, 'lg-grab');\n        }\n\n        if (this.s.showAfterLoad) {\n            _lgUtils2.default.addClass(this.outer, 'lg-show-after-load');\n        }\n\n        if (this.doCss()) {\n            var inner = this.outer.querySelector('.lg-inner');\n            _lgUtils2.default.setVendor(inner, 'TransitionTimingFunction', this.s.cssEasing);\n            _lgUtils2.default.setVendor(inner, 'TransitionDuration', this.s.speed + 'ms');\n        }\n\n        setTimeout(function () {\n            _lgUtils2.default.addClass(document.querySelector('.lg-backdrop'), 'in');\n        });\n\n        setTimeout(function () {\n            _lgUtils2.default.addClass(_this.outer, 'lg-visible');\n        }, this.s.backdropDuration);\n\n        if (this.s.download) {\n            this.outer.querySelector('.lg-toolbar').insertAdjacentHTML('beforeend', '<a id=\"lg-download\" aria-label=\"Download\" target=\"_blank\" download class=\"lg-download lg-icon\"></a>');\n        }\n\n        // Store the current scroll top value to scroll back after closing the gallery..\n        this.prevScrollTop = document.documentElement.scrollTop || document.body.scrollTop;\n    };\n\n    // For fixed height gallery\n    Plugin.prototype.setTop = function () {\n        if (this.s.height !== '100%') {\n            var wH = window.innerHeight;\n            var top = (wH - parseInt(this.s.height, 10)) / 2;\n            var lGallery = this.outer.querySelector('.lg');\n            if (wH >= parseInt(this.s.height, 10)) {\n                lGallery.style.top = top + 'px';\n            } else {\n                lGallery.style.top = '0px';\n            }\n        }\n    };\n\n    // Find css3 support\n    Plugin.prototype.doCss = function () {\n        // check for css animation support\n        var support = function support() {\n            var transition = ['transition', 'MozTransition', 'WebkitTransition', 'OTransition', 'msTransition', 'KhtmlTransition'];\n            var root = document.documentElement;\n            var i = 0;\n            for (i = 0; i < transition.length; i++) {\n                if (transition[i] in root.style) {\n                    return true;\n                }\n            }\n        };\n\n        if (support()) {\n            return true;\n        }\n\n        return false;\n    };\n\n    /**\n     *  @desc Check the given src is video\n     *  @param {String} src\n     *  @return {Object} video type\n     *  Ex:{ youtube  :  [\"//www.youtube.com/watch?v=c0asJgSyxcY\", \"c0asJgSyxcY\"] }\n     */\n    Plugin.prototype.isVideo = function (src, index) {\n\n        var html;\n        if (this.s.dynamic) {\n            html = this.s.dynamicEl[index].html;\n        } else {\n            html = this.items[index].getAttribute('data-html');\n        }\n\n        if (!src && html) {\n            return {\n                html5: true\n            };\n        }\n\n        var youtube = src.match(/\\/\\/(?:www\\.)?youtu(?:\\.be|be\\.com|be-nocookie\\.com)\\/(?:watch\\?v=|embed\\/)?([a-z0-9\\-\\_\\%]+)/i);\n        var vimeo = src.match(/\\/\\/(?:www\\.)?vimeo.com\\/([0-9a-z\\-_]+)/i);\n        var dailymotion = src.match(/\\/\\/(?:www\\.)?dai.ly\\/([0-9a-z\\-_]+)/i);\n        var vk = src.match(/\\/\\/(?:www\\.)?(?:vk\\.com|vkontakte\\.ru)\\/(?:video_ext\\.php\\?)(.*)/i);\n\n        if (youtube) {\n            return {\n                youtube: youtube\n            };\n        } else if (vimeo) {\n            return {\n                vimeo: vimeo\n            };\n        } else if (dailymotion) {\n            return {\n                dailymotion: dailymotion\n            };\n        } else if (vk) {\n            return {\n                vk: vk\n            };\n        }\n    };\n\n    /**\n     *  @desc Create image counter\n     *  Ex: 1/10\n     */\n    Plugin.prototype.counter = function () {\n        if (this.s.counter) {\n            this.outer.querySelector(this.s.appendCounterTo).insertAdjacentHTML('beforeend', '<div id=\"lg-counter\" role=\"status\" aria-live=\"polite\"><span id=\"lg-counter-current\">' + (parseInt(this.index, 10) + 1) + '</span> / <span id=\"lg-counter-all\">' + this.items.length + '</span></div>');\n        }\n    };\n\n    /**\n     *  @desc add sub-html into the slide\n     *  @param {Number} index - index of the slide\n     */\n    Plugin.prototype.addHtml = function (index) {\n        var subHtml = null;\n        var currentEle;\n        if (this.s.dynamic) {\n            subHtml = this.s.dynamicEl[index].subHtml;\n        } else {\n            currentEle = this.items[index];\n            subHtml = currentEle.getAttribute('data-sub-html');\n            if (this.s.getCaptionFromTitleOrAlt && !subHtml) {\n                subHtml = currentEle.getAttribute('title');\n                if (subHtml && currentEle.querySelector('img')) {\n                    subHtml = currentEle.querySelector('img').getAttribute('alt');\n                }\n            }\n        }\n\n        if (typeof subHtml !== 'undefined' && subHtml !== null) {\n\n            // get first letter of subhtml\n            // if first letter starts with . or # get the html form the jQuery object\n            var fL = subHtml.substring(0, 1);\n            if (fL === '.' || fL === '#') {\n                if (this.s.subHtmlSelectorRelative && !this.s.dynamic) {\n                    subHtml = currentEle.querySelector(subHtml).innerHTML;\n                } else {\n                    subHtml = document.querySelector(subHtml).innerHTML;\n                }\n            }\n        } else {\n            subHtml = '';\n        }\n\n        if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n            this.outer.querySelector(this.s.appendSubHtmlTo).innerHTML = subHtml;\n        } else {\n            this.___slide[index].insertAdjacentHTML('beforeend', subHtml);\n        }\n\n        // Add lg-empty-html class if title doesn't exist\n        if (typeof subHtml !== 'undefined' && subHtml !== null) {\n            if (subHtml === '') {\n                _lgUtils2.default.addClass(this.outer.querySelector(this.s.appendSubHtmlTo), 'lg-empty-html');\n            } else {\n                _lgUtils2.default.removeClass(this.outer.querySelector(this.s.appendSubHtmlTo), 'lg-empty-html');\n            }\n        }\n\n        _lgUtils2.default.trigger(this.el, 'onAfterAppendSubHtml', {\n            index: index\n        });\n    };\n\n    /**\n     *  @desc Preload slides\n     *  @param {Number} index - index of the slide\n     */\n    Plugin.prototype.preload = function (index) {\n        var i = 1;\n        var j = 1;\n        for (i = 1; i <= this.s.preload; i++) {\n            if (i >= this.items.length - index) {\n                break;\n            }\n\n            this.loadContent(index + i, false, 0);\n        }\n\n        for (j = 1; j <= this.s.preload; j++) {\n            if (index - j < 0) {\n                break;\n            }\n\n            this.loadContent(index - j, false, 0);\n        }\n    };\n\n    /**\n     *  @desc Load slide content into slide.\n     *  @param {Number} index - index of the slide.\n     *  @param {Boolean} rec - if true call loadcontent() function again.\n     *  @param {Boolean} delay - delay for adding complete class. it is 0 except first time.\n     */\n    Plugin.prototype.loadContent = function (index, rec, delay) {\n\n        var _this = this;\n        var _hasPoster = false;\n        var _img;\n        var _src;\n        var _poster;\n        var _srcset;\n        var _sizes;\n        var _html;\n        var _alt;\n        var getResponsiveSrc = function getResponsiveSrc(srcItms) {\n            var rsWidth = [];\n            var rsSrc = [];\n            for (var i = 0; i < srcItms.length; i++) {\n                var __src = srcItms[i].split(' ');\n\n                // Manage empty space\n                if (__src[0] === '') {\n                    __src.splice(0, 1);\n                }\n\n                rsSrc.push(__src[0]);\n                rsWidth.push(__src[1]);\n            }\n\n            var wWidth = window.innerWidth;\n            for (var j = 0; j < rsWidth.length; j++) {\n                if (parseInt(rsWidth[j], 10) > wWidth) {\n                    _src = rsSrc[j];\n                    break;\n                }\n            }\n        };\n\n        if (_this.s.dynamic) {\n\n            if (_this.s.dynamicEl[index].poster) {\n                _hasPoster = true;\n                _poster = _this.s.dynamicEl[index].poster;\n            }\n\n            _html = _this.s.dynamicEl[index].html;\n            _src = _this.s.dynamicEl[index].src;\n            _alt = _this.s.dynamicEl[index].alt;\n\n            if (_this.s.dynamicEl[index].responsive) {\n                var srcDyItms = _this.s.dynamicEl[index].responsive.split(',');\n                getResponsiveSrc(srcDyItms);\n            }\n\n            _srcset = _this.s.dynamicEl[index].srcset;\n            _sizes = _this.s.dynamicEl[index].sizes;\n        } else {\n\n            if (_this.items[index].getAttribute('data-poster')) {\n                _hasPoster = true;\n                _poster = _this.items[index].getAttribute('data-poster');\n            }\n\n            _html = _this.items[index].getAttribute('data-html');\n            _src = _this.items[index].getAttribute('href') || _this.items[index].getAttribute('data-src');\n            _alt = _this.items[index].getAttribute('title');\n\n            if (_this.items[index].querySelector('img')) {\n                _alt = _alt || _this.items[index].querySelector('img').getAttribute('alt');\n            }\n\n            if (_this.items[index].getAttribute('data-responsive')) {\n                var srcItms = _this.items[index].getAttribute('data-responsive').split(',');\n                getResponsiveSrc(srcItms);\n            }\n\n            _srcset = _this.items[index].getAttribute('data-srcset');\n            _sizes = _this.items[index].getAttribute('data-sizes');\n        }\n\n        //if (_src || _srcset || _sizes || _poster) {\n\n        var iframe = false;\n        if (_this.s.dynamic) {\n            if (_this.s.dynamicEl[index].iframe) {\n                iframe = true;\n            }\n        } else {\n            if (_this.items[index].getAttribute('data-iframe') === 'true') {\n                iframe = true;\n            }\n        }\n\n        var _isVideo = _this.isVideo(_src, index);\n        if (!_lgUtils2.default.hasClass(_this.___slide[index], 'lg-loaded')) {\n            if (iframe) {\n                _this.___slide[index].insertAdjacentHTML('afterbegin', '<div class=\"lg-video-cont\" style=\"max-width:' + _this.s.iframeMaxWidth + '\"><div class=\"lg-video\"><iframe class=\"lg-object\" frameborder=\"0\" src=\"' + _src + '\"  allowfullscreen=\"true\"></iframe></div></div>');\n            } else if (_hasPoster) {\n                var videoClass = '';\n                if (_isVideo && _isVideo.youtube) {\n                    videoClass = 'lg-has-youtube';\n                } else if (_isVideo && _isVideo.vimeo) {\n                    videoClass = 'lg-has-vimeo';\n                } else {\n                    videoClass = 'lg-has-html5';\n                }\n\n                _this.___slide[index].insertAdjacentHTML('beforeend', '<div class=\"lg-video-cont ' + videoClass + ' \"><div class=\"lg-video\"><span class=\"lg-video-play\"></span><img class=\"lg-object lg-has-poster\" src=\"' + _poster + '\" /></div></div>');\n            } else if (_isVideo) {\n                _this.___slide[index].insertAdjacentHTML('beforeend', '<div class=\"lg-video-cont \"><div class=\"lg-video\"></div></div>');\n                _lgUtils2.default.trigger(_this.el, 'hasVideo', {\n                    index: index,\n                    src: _src,\n                    html: _html\n                });\n            } else {\n                _alt = _alt ? 'alt=\"' + _alt + '\"' : '';\n                _this.___slide[index].insertAdjacentHTML('beforeend', '<div class=\"lg-img-wrap\"><img class=\"lg-object lg-image\" ' + _alt + ' src=\"' + _src + '\" /></div>');\n            }\n\n            _lgUtils2.default.trigger(_this.el, 'onAferAppendSlide', {\n                index: index\n            });\n\n            _img = _this.___slide[index].querySelector('.lg-object');\n            if (_sizes) {\n                _img.setAttribute('sizes', _sizes);\n            }\n\n            if (_srcset) {\n                _img.setAttribute('srcset', _srcset);\n\n                if (this.s.supportLegacyBrowser) {\n                    try {\n                        picturefill({\n                            elements: [_img[0]]\n                        });\n                    } catch (e) {\n                        console.warn('If you want srcset to be supported for older browsers, ' + 'please include picturefil javascript library in your document.');\n                    }\n                }\n            }\n\n            if (this.s.appendSubHtmlTo !== '.lg-sub-html') {\n                _this.addHtml(index);\n            }\n\n            _lgUtils2.default.addClass(_this.___slide[index], 'lg-loaded');\n        }\n\n        _lgUtils2.default.on(_this.___slide[index].querySelector('.lg-object'), 'load.lg error.lg', function () {\n\n            // For first time add some delay for displaying the start animation.\n            var _speed = 0;\n\n            // Do not change the delay value because it is required for zoom plugin.\n            // If gallery opened from direct url (hash) speed value should be 0\n            if (delay && !_lgUtils2.default.hasClass(document.body, 'lg-from-hash')) {\n                _speed = delay;\n            }\n\n            setTimeout(function () {\n                _lgUtils2.default.addClass(_this.___slide[index], 'lg-complete');\n\n                _lgUtils2.default.trigger(_this.el, 'onSlideItemLoad', {\n                    index: index,\n                    delay: delay || 0\n                });\n            }, _speed);\n        });\n\n        // @todo check load state for html5 videos\n        if (_isVideo && _isVideo.html5 && !_hasPoster) {\n            _lgUtils2.default.addClass(_this.___slide[index], 'lg-complete');\n        }\n\n        if (rec === true) {\n            if (!_lgUtils2.default.hasClass(_this.___slide[index], 'lg-complete')) {\n                _lgUtils2.default.on(_this.___slide[index].querySelector('.lg-object'), 'load.lg error.lg', function () {\n                    _this.preload(index);\n                });\n            } else {\n                _this.preload(index);\n            }\n        }\n\n        //}\n    };\n\n    /**\n    *   @desc slide function for lightgallery\n        ** Slide() gets call on start\n        ** ** Set lg.on true once slide() function gets called.\n        ** Call loadContent() on slide() function inside setTimeout\n        ** ** On first slide we do not want any animation like slide of fade\n        ** ** So on first slide( if lg.on if false that is first slide) loadContent() should start loading immediately\n        ** ** Else loadContent() should wait for the transition to complete.\n        ** ** So set timeout s.speed + 50\n    <=> ** loadContent() will load slide content in to the particular slide\n        ** ** It has recursion (rec) parameter. if rec === true loadContent() will call preload() function.\n        ** ** preload will execute only when the previous slide is fully loaded (images iframe)\n        ** ** avoid simultaneous image load\n    <=> ** Preload() will check for s.preload value and call loadContent() again accoring to preload value\n        ** loadContent()  <====> Preload();\n    \n    *   @param {Number} index - index of the slide\n    *   @param {Boolean} fromTouch - true if slide function called via touch event or mouse drag\n    *   @param {Boolean} fromThumb - true if slide function called via thumbnail click\n    */\n    Plugin.prototype.slide = function (index, fromTouch, fromThumb) {\n\n        var _prevIndex = 0;\n        for (var i = 0; i < this.___slide.length; i++) {\n            if (_lgUtils2.default.hasClass(this.___slide[i], 'lg-current')) {\n                _prevIndex = i;\n                break;\n            }\n        }\n\n        var _this = this;\n\n        // Prevent if multiple call\n        // Required for hsh plugin\n        if (_this.lGalleryOn && _prevIndex === index) {\n            return;\n        }\n\n        var _length = this.___slide.length;\n        var _time = _this.lGalleryOn ? this.s.speed : 0;\n        var _next = false;\n        var _prev = false;\n\n        if (!_this.lgBusy) {\n\n            if (this.s.download) {\n                var _src;\n                if (_this.s.dynamic) {\n                    _src = _this.s.dynamicEl[index].downloadUrl !== false && (_this.s.dynamicEl[index].downloadUrl || _this.s.dynamicEl[index].src);\n                } else {\n                    _src = _this.items[index].getAttribute('data-download-url') !== 'false' && (_this.items[index].getAttribute('data-download-url') || _this.items[index].getAttribute('href') || _this.items[index].getAttribute('data-src'));\n                }\n\n                if (_src) {\n                    document.getElementById('lg-download').setAttribute('href', _src);\n                    _lgUtils2.default.removeClass(_this.outer, 'lg-hide-download');\n                } else {\n                    _lgUtils2.default.addClass(_this.outer, 'lg-hide-download');\n                }\n            }\n\n            _lgUtils2.default.trigger(_this.el, 'onBeforeSlide', {\n                prevIndex: _prevIndex,\n                index: index,\n                fromTouch: fromTouch,\n                fromThumb: fromThumb\n            });\n\n            _this.lgBusy = true;\n\n            clearTimeout(_this.hideBartimeout);\n\n            // Add title if this.s.appendSubHtmlTo === lg-sub-html\n            if (this.s.appendSubHtmlTo === '.lg-sub-html') {\n\n                // wait for slide animation to complete\n                setTimeout(function () {\n                    _this.addHtml(index);\n                }, _time);\n            }\n\n            this.arrowDisable(index);\n\n            if (!fromTouch) {\n\n                // remove all transitions\n                _lgUtils2.default.addClass(_this.outer, 'lg-no-trans');\n\n                for (var j = 0; j < this.___slide.length; j++) {\n                    _lgUtils2.default.removeClass(this.___slide[j], 'lg-prev-slide');\n                    _lgUtils2.default.removeClass(this.___slide[j], 'lg-next-slide');\n                }\n\n                if (index < _prevIndex) {\n                    _prev = true;\n                    if (index === 0 && _prevIndex === _length - 1 && !fromThumb) {\n                        _prev = false;\n                        _next = true;\n                    }\n                } else if (index > _prevIndex) {\n                    _next = true;\n                    if (index === _length - 1 && _prevIndex === 0 && !fromThumb) {\n                        _prev = true;\n                        _next = false;\n                    }\n                }\n\n                if (_prev) {\n\n                    //prevslide\n                    _lgUtils2.default.addClass(this.___slide[index], 'lg-prev-slide');\n                    _lgUtils2.default.addClass(this.___slide[_prevIndex], 'lg-next-slide');\n                } else if (_next) {\n\n                    // next slide\n                    _lgUtils2.default.addClass(this.___slide[index], 'lg-next-slide');\n                    _lgUtils2.default.addClass(this.___slide[_prevIndex], 'lg-prev-slide');\n                }\n\n                // give 50 ms for browser to add/remove class\n                setTimeout(function () {\n                    _lgUtils2.default.removeClass(_this.outer.querySelector('.lg-current'), 'lg-current');\n\n                    //_this.$slide.eq(_prevIndex).removeClass('lg-current');\n                    _lgUtils2.default.addClass(_this.___slide[index], 'lg-current');\n\n                    // reset all transitions\n                    _lgUtils2.default.removeClass(_this.outer, 'lg-no-trans');\n                }, 50);\n            } else {\n\n                var touchPrev = index - 1;\n                var touchNext = index + 1;\n\n                if (index === 0 && _prevIndex === _length - 1) {\n\n                    // next slide\n                    touchNext = 0;\n                    touchPrev = _length - 1;\n                } else if (index === _length - 1 && _prevIndex === 0) {\n\n                    // prev slide\n                    touchNext = 0;\n                    touchPrev = _length - 1;\n                }\n\n                _lgUtils2.default.removeClass(_this.outer.querySelector('.lg-prev-slide'), 'lg-prev-slide');\n                _lgUtils2.default.removeClass(_this.outer.querySelector('.lg-current'), 'lg-current');\n                _lgUtils2.default.removeClass(_this.outer.querySelector('.lg-next-slide'), 'lg-next-slide');\n                _lgUtils2.default.addClass(_this.___slide[touchPrev], 'lg-prev-slide');\n                _lgUtils2.default.addClass(_this.___slide[touchNext], 'lg-next-slide');\n                _lgUtils2.default.addClass(_this.___slide[index], 'lg-current');\n            }\n\n            if (_this.lGalleryOn) {\n                setTimeout(function () {\n                    _this.loadContent(index, true, 0);\n                }, this.s.speed + 50);\n\n                setTimeout(function () {\n                    _this.lgBusy = false;\n                    _lgUtils2.default.trigger(_this.el, 'onAfterSlide', {\n                        prevIndex: _prevIndex,\n                        index: index,\n                        fromTouch: fromTouch,\n                        fromThumb: fromThumb\n                    });\n                }, this.s.speed);\n            } else {\n                _this.loadContent(index, true, _this.s.backdropDuration);\n\n                _this.lgBusy = false;\n                _lgUtils2.default.trigger(_this.el, 'onAfterSlide', {\n                    prevIndex: _prevIndex,\n                    index: index,\n                    fromTouch: fromTouch,\n                    fromThumb: fromThumb\n                });\n            }\n\n            _this.lGalleryOn = true;\n\n            if (this.s.counter) {\n                if (document.getElementById('lg-counter-current')) {\n                    document.getElementById('lg-counter-current').innerHTML = index + 1;\n                }\n            }\n        }\n    };\n\n    /**\n     *  @desc Go to next slide\n     *  @param {Boolean} fromTouch - true if slide function called via touch event\n     */\n    Plugin.prototype.goToNextSlide = function (fromTouch) {\n        var _this = this;\n        if (!_this.lgBusy) {\n            if (_this.index + 1 < _this.___slide.length) {\n                _this.index++;\n                _lgUtils2.default.trigger(_this.el, 'onBeforeNextSlide', {\n                    index: _this.index\n                });\n                _this.slide(_this.index, fromTouch, false);\n            } else {\n                if (_this.s.loop) {\n                    _this.index = 0;\n                    _lgUtils2.default.trigger(_this.el, 'onBeforeNextSlide', {\n                        index: _this.index\n                    });\n                    _this.slide(_this.index, fromTouch, false);\n                } else if (_this.s.slideEndAnimatoin) {\n                    _lgUtils2.default.addClass(_this.outer, 'lg-right-end');\n                    setTimeout(function () {\n                        _lgUtils2.default.removeClass(_this.outer, 'lg-right-end');\n                    }, 400);\n                }\n            }\n        }\n    };\n\n    /**\n     *  @desc Go to previous slide\n     *  @param {Boolean} fromTouch - true if slide function called via touch event\n     */\n    Plugin.prototype.goToPrevSlide = function (fromTouch) {\n        var _this = this;\n        if (!_this.lgBusy) {\n            if (_this.index > 0) {\n                _this.index--;\n                _lgUtils2.default.trigger(_this.el, 'onBeforePrevSlide', {\n                    index: _this.index,\n                    fromTouch: fromTouch\n                });\n                _this.slide(_this.index, fromTouch, false);\n            } else {\n                if (_this.s.loop) {\n                    _this.index = _this.items.length - 1;\n                    _lgUtils2.default.trigger(_this.el, 'onBeforePrevSlide', {\n                        index: _this.index,\n                        fromTouch: fromTouch\n                    });\n                    _this.slide(_this.index, fromTouch, false);\n                } else if (_this.s.slideEndAnimatoin) {\n                    _lgUtils2.default.addClass(_this.outer, 'lg-left-end');\n                    setTimeout(function () {\n                        _lgUtils2.default.removeClass(_this.outer, 'lg-left-end');\n                    }, 400);\n                }\n            }\n        }\n    };\n\n    Plugin.prototype.keyPress = function () {\n        var _this = this;\n        if (this.items.length > 1) {\n            _lgUtils2.default.on(window, 'keyup.lg', function (e) {\n                if (_this.items.length > 1) {\n                    if (e.keyCode === 37) {\n                        e.preventDefault();\n                        _this.goToPrevSlide();\n                    }\n\n                    if (e.keyCode === 39) {\n                        e.preventDefault();\n                        _this.goToNextSlide();\n                    }\n                }\n            });\n        }\n\n        _lgUtils2.default.on(window, 'keydown.lg', function (e) {\n            if (_this.s.escKey === true && e.keyCode === 27) {\n                e.preventDefault();\n                if (!_lgUtils2.default.hasClass(_this.outer, 'lg-thumb-open')) {\n                    _this.destroy();\n                } else {\n                    _lgUtils2.default.removeClass(_this.outer, 'lg-thumb-open');\n                }\n            }\n        });\n    };\n\n    Plugin.prototype.arrow = function () {\n        var _this = this;\n        _lgUtils2.default.on(this.outer.querySelector('.lg-prev'), 'click.lg', function () {\n            _this.goToPrevSlide();\n        });\n\n        _lgUtils2.default.on(this.outer.querySelector('.lg-next'), 'click.lg', function () {\n            _this.goToNextSlide();\n        });\n    };\n\n    Plugin.prototype.arrowDisable = function (index) {\n\n        // Disable arrows if s.hideControlOnEnd is true\n        if (!this.s.loop && this.s.hideControlOnEnd) {\n            var next = this.outer.querySelector('.lg-next');\n            var prev = this.outer.querySelector('.lg-prev');\n            if (index + 1 < this.___slide.length) {\n                next.removeAttribute('disabled');\n                _lgUtils2.default.removeClass(next, 'disabled');\n            } else {\n                next.setAttribute('disabled', 'disabled');\n                _lgUtils2.default.addClass(next, 'disabled');\n            }\n\n            if (index > 0) {\n                prev.removeAttribute('disabled');\n                _lgUtils2.default.removeClass(prev, 'disabled');\n            } else {\n                prev.setAttribute('disabled', 'disabled');\n                _lgUtils2.default.addClass(prev, 'disabled');\n            }\n        }\n    };\n\n    Plugin.prototype.setTranslate = function (el, xValue, yValue) {\n        // jQuery supports Automatic CSS prefixing since jQuery 1.8.0\n        if (this.s.useLeft) {\n            el.style.left = xValue;\n        } else {\n            _lgUtils2.default.setVendor(el, 'Transform', 'translate3d(' + xValue + 'px, ' + yValue + 'px, 0px)');\n        }\n    };\n\n    Plugin.prototype.touchMove = function (startCoords, endCoords) {\n\n        var distance = endCoords - startCoords;\n\n        if (Math.abs(distance) > 15) {\n            // reset opacity and transition duration\n            _lgUtils2.default.addClass(this.outer, 'lg-dragging');\n\n            // move current slide\n            this.setTranslate(this.___slide[this.index], distance, 0);\n\n            // move next and prev slide with current slide\n            this.setTranslate(document.querySelector('.lg-prev-slide'), -this.___slide[this.index].clientWidth + distance, 0);\n            this.setTranslate(document.querySelector('.lg-next-slide'), this.___slide[this.index].clientWidth + distance, 0);\n        }\n    };\n\n    Plugin.prototype.touchEnd = function (distance) {\n        var _this = this;\n\n        // keep slide animation for any mode while dragg/swipe\n        if (_this.s.mode !== 'lg-slide') {\n            _lgUtils2.default.addClass(_this.outer, 'lg-slide');\n        }\n\n        for (var i = 0; i < this.___slide.length; i++) {\n            if (!_lgUtils2.default.hasClass(this.___slide[i], 'lg-current') && !_lgUtils2.default.hasClass(this.___slide[i], 'lg-prev-slide') && !_lgUtils2.default.hasClass(this.___slide[i], 'lg-next-slide')) {\n                this.___slide[i].style.opacity = '0';\n            }\n        }\n\n        // set transition duration\n        setTimeout(function () {\n            _lgUtils2.default.removeClass(_this.outer, 'lg-dragging');\n            if (distance < 0 && Math.abs(distance) > _this.s.swipeThreshold) {\n                _this.goToNextSlide(true);\n            } else if (distance > 0 && Math.abs(distance) > _this.s.swipeThreshold) {\n                _this.goToPrevSlide(true);\n            } else if (Math.abs(distance) < 5) {\n\n                // Trigger click if distance is less than 5 pix\n                _lgUtils2.default.trigger(_this.el, 'onSlideClick');\n            }\n\n            for (var i = 0; i < _this.___slide.length; i++) {\n                _this.___slide[i].removeAttribute('style');\n            }\n        });\n\n        // remove slide class once drag/swipe is completed if mode is not slide\n        setTimeout(function () {\n            if (!_lgUtils2.default.hasClass(_this.outer, 'lg-dragging') && _this.s.mode !== 'lg-slide') {\n                _lgUtils2.default.removeClass(_this.outer, 'lg-slide');\n            }\n        }, _this.s.speed + 100);\n    };\n\n    Plugin.prototype.enableSwipe = function () {\n        var _this = this;\n        var startCoords = 0;\n        var endCoords = 0;\n        var isMoved = false;\n\n        if (_this.s.enableSwipe && _this.isTouch && _this.doCss()) {\n\n            for (var i = 0; i < _this.___slide.length; i++) {\n                /*jshint loopfunc: true */\n                _lgUtils2.default.on(_this.___slide[i], 'touchstart.lg', function (e) {\n                    if (!_lgUtils2.default.hasClass(_this.outer, 'lg-zoomed') && !_this.lgBusy) {\n                        e.preventDefault();\n                        _this.manageSwipeClass();\n                        startCoords = e.targetTouches[0].pageX;\n                    }\n                });\n            }\n\n            for (var j = 0; j < _this.___slide.length; j++) {\n                /*jshint loopfunc: true */\n                _lgUtils2.default.on(_this.___slide[j], 'touchmove.lg', function (e) {\n                    if (!_lgUtils2.default.hasClass(_this.outer, 'lg-zoomed')) {\n                        e.preventDefault();\n                        endCoords = e.targetTouches[0].pageX;\n                        _this.touchMove(startCoords, endCoords);\n                        isMoved = true;\n                    }\n                });\n            }\n\n            for (var k = 0; k < _this.___slide.length; k++) {\n                /*jshint loopfunc: true */\n                _lgUtils2.default.on(_this.___slide[k], 'touchend.lg', function () {\n                    if (!_lgUtils2.default.hasClass(_this.outer, 'lg-zoomed')) {\n                        if (isMoved) {\n                            isMoved = false;\n                            _this.touchEnd(endCoords - startCoords);\n                        } else {\n                            _lgUtils2.default.trigger(_this.el, 'onSlideClick');\n                        }\n                    }\n                });\n            }\n        }\n    };\n\n    Plugin.prototype.enableDrag = function () {\n        var _this = this;\n        var startCoords = 0;\n        var endCoords = 0;\n        var isDraging = false;\n        var isMoved = false;\n        if (_this.s.enableDrag && !_this.isTouch && _this.doCss()) {\n            for (var i = 0; i < _this.___slide.length; i++) {\n                /*jshint loopfunc: true */\n                _lgUtils2.default.on(_this.___slide[i], 'mousedown.lg', function (e) {\n                    // execute only on .lg-object\n                    if (!_lgUtils2.default.hasClass(_this.outer, 'lg-zoomed')) {\n                        if (_lgUtils2.default.hasClass(e.target, 'lg-object') || _lgUtils2.default.hasClass(e.target, 'lg-video-play')) {\n                            e.preventDefault();\n\n                            if (!_this.lgBusy) {\n                                _this.manageSwipeClass();\n                                startCoords = e.pageX;\n                                isDraging = true;\n\n                                // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723\n                                _this.outer.scrollLeft += 1;\n                                _this.outer.scrollLeft -= 1;\n\n                                // *\n\n                                _lgUtils2.default.removeClass(_this.outer, 'lg-grab');\n                                _lgUtils2.default.addClass(_this.outer, 'lg-grabbing');\n\n                                _lgUtils2.default.trigger(_this.el, 'onDragstart');\n                            }\n                        }\n                    }\n                });\n            }\n\n            _lgUtils2.default.on(window, 'mousemove.lg', function (e) {\n                if (isDraging) {\n                    isMoved = true;\n                    endCoords = e.pageX;\n                    _this.touchMove(startCoords, endCoords);\n                    _lgUtils2.default.trigger(_this.el, 'onDragmove');\n                }\n            });\n\n            _lgUtils2.default.on(window, 'mouseup.lg', function (e) {\n                if (isMoved) {\n                    isMoved = false;\n                    _this.touchEnd(endCoords - startCoords);\n                    _lgUtils2.default.trigger(_this.el, 'onDragend');\n                } else if (_lgUtils2.default.hasClass(e.target, 'lg-object') || _lgUtils2.default.hasClass(e.target, 'lg-video-play')) {\n                    _lgUtils2.default.trigger(_this.el, 'onSlideClick');\n                }\n\n                // Prevent execution on click\n                if (isDraging) {\n                    isDraging = false;\n                    _lgUtils2.default.removeClass(_this.outer, 'lg-grabbing');\n                    _lgUtils2.default.addClass(_this.outer, 'lg-grab');\n                }\n            });\n        }\n    };\n\n    Plugin.prototype.manageSwipeClass = function () {\n        var touchNext = this.index + 1;\n        var touchPrev = this.index - 1;\n        var length = this.___slide.length;\n        if (this.s.loop) {\n            if (this.index === 0) {\n                touchPrev = length - 1;\n            } else if (this.index === length - 1) {\n                touchNext = 0;\n            }\n        }\n\n        for (var i = 0; i < this.___slide.length; i++) {\n            _lgUtils2.default.removeClass(this.___slide[i], 'lg-next-slide');\n            _lgUtils2.default.removeClass(this.___slide[i], 'lg-prev-slide');\n        }\n\n        if (touchPrev > -1) {\n            _lgUtils2.default.addClass(this.___slide[touchPrev], 'lg-prev-slide');\n        }\n\n        _lgUtils2.default.addClass(this.___slide[touchNext], 'lg-next-slide');\n    };\n\n    Plugin.prototype.mousewheel = function () {\n        var _this = this;\n        _lgUtils2.default.on(_this.outer, 'mousewheel.lg', function (e) {\n\n            if (!e.deltaY) {\n                return;\n            }\n\n            if (e.deltaY > 0) {\n                _this.goToPrevSlide();\n            } else {\n                _this.goToNextSlide();\n            }\n\n            e.preventDefault();\n        });\n    };\n\n    Plugin.prototype.closeGallery = function () {\n\n        var _this = this;\n        var mousedown = false;\n        _lgUtils2.default.on(this.outer.querySelector('.lg-close'), 'click.lg', function () {\n            _this.destroy();\n        });\n\n        if (_this.s.closable) {\n\n            // If you drag the slide and release outside gallery gets close on chrome\n            // for preventing this check mousedown and mouseup happened on .lg-item or lg-outer\n            _lgUtils2.default.on(_this.outer, 'mousedown.lg', function (e) {\n\n                if (_lgUtils2.default.hasClass(e.target, 'lg-outer') || _lgUtils2.default.hasClass(e.target, 'lg-item') || _lgUtils2.default.hasClass(e.target, 'lg-img-wrap')) {\n                    mousedown = true;\n                } else {\n                    mousedown = false;\n                }\n            });\n\n            _lgUtils2.default.on(_this.outer, 'mouseup.lg', function (e) {\n\n                if (_lgUtils2.default.hasClass(e.target, 'lg-outer') || _lgUtils2.default.hasClass(e.target, 'lg-item') || _lgUtils2.default.hasClass(e.target, 'lg-img-wrap') && mousedown) {\n                    if (!_lgUtils2.default.hasClass(_this.outer, 'lg-dragging')) {\n                        _this.destroy();\n                    }\n                }\n            });\n        }\n    };\n\n    Plugin.prototype.destroy = function (d) {\n\n        var _this = this;\n\n        if (!d) {\n            _lgUtils2.default.trigger(_this.el, 'onBeforeClose');\n        }\n\n        document.body.scrollTop = _this.prevScrollTop;\n        document.documentElement.scrollTop = _this.prevScrollTop;\n\n        /**\n         * if d is false or undefined destroy will only close the gallery\n         * plugins instance remains with the element\n         *\n         * if d is true destroy will completely remove the plugin\n         */\n\n        if (d) {\n            if (!_this.s.dynamic) {\n                // only when not using dynamic mode is $items a jquery collection\n\n                for (var i = 0; i < this.items.length; i++) {\n                    _lgUtils2.default.off(this.items[i], '.lg');\n                    _lgUtils2.default.off(this.items[i], '.lgcustom');\n                }\n            }\n\n            var lguid = _this.el.getAttribute('lg-uid');\n            delete window.lgData[lguid];\n            _this.el.removeAttribute('lg-uid');\n        }\n\n        // Unbind all events added by lightGallery\n        _lgUtils2.default.off(this.el, '.lgtm');\n\n        // Distroy all lightGallery modules\n        for (var key in window.lgModules) {\n            if (_this.modules[key]) {\n                _this.modules[key].destroy(d);\n            }\n        }\n\n        this.lGalleryOn = false;\n\n        clearTimeout(_this.hideBartimeout);\n        this.hideBartimeout = false;\n        _lgUtils2.default.off(window, '.lg');\n        _lgUtils2.default.removeClass(document.body, 'lg-on');\n        _lgUtils2.default.removeClass(document.body, 'lg-from-hash');\n\n        if (_this.outer) {\n            _lgUtils2.default.removeClass(_this.outer, 'lg-visible');\n        }\n\n        _lgUtils2.default.removeClass(document.querySelector('.lg-backdrop'), 'in');\n        setTimeout(function () {\n            try {\n                if (_this.outer) {\n                    _this.outer.parentNode.removeChild(_this.outer);\n                }\n\n                if (document.querySelector('.lg-backdrop')) {\n                    document.querySelector('.lg-backdrop').parentNode.removeChild(document.querySelector('.lg-backdrop'));\n                }\n\n                if (!d) {\n                    _lgUtils2.default.trigger(_this.el, 'onCloseAfter');\n                }\n                _this.el.focus();\n            } catch (err) {}\n        }, _this.s.backdropDuration + 50);\n    };\n\n    window.lightGallery = function (el, options) {\n        if (!el) {\n            return;\n        }\n\n        try {\n            if (!el.getAttribute('lg-uid')) {\n                var uid = 'lg' + window.lgData.uid++;\n                window.lgData[uid] = new Plugin(el, options);\n                el.setAttribute('lg-uid', uid);\n            } else {\n                window.lgData[el.getAttribute('lg-uid')].init();\n            }\n        } catch (err) {\n            console.error('lightGallery has not initiated properly', err);\n        }\n    };\n});"]},"metadata":{},"sourceType":"script"}